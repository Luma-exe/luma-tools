<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luma Tools — Universal Media Toolkit</title>

    <!-- Discord / Open Graph embed -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tools.lumaplayground.com">
    <meta property="og:title" content="Luma Tools">
    <meta property="og:description" content="Free online media toolkit — download videos, convert images, compress PDFs and 20+ more tools.">
    <meta property="og:image" content="https://tools.lumaplayground.com/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Luma Tools">
    <meta name="theme-color" content="#7c5cff">
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" type="image/png" href="/favicon.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Luma Tools — Universal Media Toolkit">
    <meta name="twitter:description" content="Free online media toolkit — download videos, convert images, compress PDFs and 20+ more tools.">
    <meta name="twitter:image" content="https://tools.lumaplayground.com/og-image.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.10/dist/umd/ffmpeg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/util@0.12.1/dist/umd/util.min.js"></script>
    <!-- Audio waveform visualization -->
    <script src="https://unpkg.com/wavesurfer.js@7.6.0/dist/wavesurfer.min.js"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- Animated background -->
    <div class="bg-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="grid-overlay"></div>
    </div>
    <canvas id="particles"></canvas>

    <div class="app-layout">
        <!-- ═══════════════ SIDEBAR ═══════════════ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a class="logo" href="#" onclick="switchTool('landing'); return false;">
                    <div class="logo-icon"><i class="fas fa-bolt"></i></div>
                    <div class="logo-text"><h1>LUMA<span>TOOLS</span></h1></div>
                </a>
                <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
            </div>

            <!-- Search bar -->
            <div class="sidebar-search">
                <div class="search-input-wrap">
                    <i class="fas fa-search"></i>
                    <input type="text" id="sidebarSearch" placeholder="Search tools..." autocomplete="off" spellcheck="false" oninput="filterSidebarTools()">
                </div>
            </div>

            <nav class="sidebar-nav" id="sidebarNav">
                <div class="nav-category">
                    <div class="nav-category-title">DOWNLOAD</div>
                    <a class="nav-item" data-tool="downloader" onclick="switchTool('downloader')">
                        <i class="fas fa-download"></i><span>Media Downloader</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">IMAGE</div>
                    <a class="nav-item" data-tool="image-compress" onclick="switchTool('image-compress')">
                        <i class="fas fa-compress-alt"></i><span>Compress</span>
                    </a>
                    <a class="nav-item" data-tool="image-resize" onclick="switchTool('image-resize')">
                        <i class="fas fa-expand-arrows-alt"></i><span>Resize</span>
                    </a>
                    <a class="nav-item" data-tool="image-convert" onclick="switchTool('image-convert')">
                        <i class="fas fa-exchange-alt"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="metadata-strip" onclick="switchTool('metadata-strip')">
                        <i class="fas fa-eraser"></i><span>Metadata Strip</span>
                    </a>
                    <a class="nav-item" data-tool="favicon-generate" onclick="switchTool('favicon-generate')">
                        <i class="fas fa-star"></i><span>Favicon Generator</span>
                    </a>
                    <a class="nav-item" data-tool="image-crop" onclick="switchTool('image-crop')">
                        <i class="fas fa-crop-alt"></i><span>Crop</span>
                    </a>
                    <a class="nav-item" data-tool="image-bg-remove" onclick="switchTool('image-bg-remove')">
                        <i class="fas fa-user-alt"></i><span>Background Remover</span>
                    </a>
                    <a class="nav-item" data-tool="redact" onclick="switchTool('redact')">
                        <i class="fas fa-user-secret"></i><span>Privacy Redaction</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">VIDEO</div>
                    <a class="nav-item" data-tool="video-compress" onclick="switchTool('video-compress')">
                        <i class="fas fa-file-video"></i><span>Compress</span>
                    </a>
                    <a class="nav-item" data-tool="video-trim" onclick="switchTool('video-trim')">
                        <i class="fas fa-cut"></i><span>Trim / Cut</span>
                    </a>
                    <a class="nav-item" data-tool="video-convert" onclick="switchTool('video-convert')">
                        <i class="fas fa-film"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="video-extract-audio" onclick="switchTool('video-extract-audio')">
                        <i class="fas fa-volume-up"></i><span>Extract Audio</span>
                    </a>
                    <a class="nav-item" data-tool="video-to-gif" onclick="switchTool('video-to-gif')">
                        <i class="fas fa-magic"></i><span>To GIF</span>
                    </a>
                    <a class="nav-item" data-tool="gif-to-video" onclick="switchTool('gif-to-video')">
                        <i class="fas fa-photo-video"></i><span>GIF to Video</span>
                    </a>
                    <a class="nav-item" data-tool="video-remove-audio" onclick="switchTool('video-remove-audio')">
                        <i class="fas fa-volume-mute"></i><span>Remove Audio</span>
                    </a>
                    <a class="nav-item" data-tool="video-speed" onclick="switchTool('video-speed')">
                        <i class="fas fa-tachometer-alt"></i><span>Speed Change</span>
                    </a>
                    <a class="nav-item" data-tool="video-frame" onclick="switchTool('video-frame')">
                        <i class="fas fa-camera"></i><span>Frame Extract</span>
                    </a>
                    <a class="nav-item" data-tool="video-stabilize" onclick="switchTool('video-stabilize')">
                        <i class="fas fa-hand-paper"></i><span>Stabilize</span>
                    </a>
                    <a class="nav-item" data-tool="subtitle-extract" onclick="switchTool('subtitle-extract')">
                        <i class="fas fa-closed-captioning"></i><span>Subtitles</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">AUDIO</div>
                    <a class="nav-item" data-tool="audio-convert" onclick="switchTool('audio-convert')">
                        <i class="fas fa-headphones"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="audio-normalize" onclick="switchTool('audio-normalize')">
                        <i class="fas fa-balance-scale-right"></i><span>Normalize</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">DOCUMENT</div>
                    <a class="nav-item" data-tool="pdf-compress" onclick="switchTool('pdf-compress')">
                        <i class="fas fa-file-pdf"></i><span>PDF Compress</span>
                    </a>
                    <a class="nav-item" data-tool="pdf-merge" onclick="switchTool('pdf-merge')">
                        <i class="fas fa-object-group"></i><span>PDF Merge</span>
                    </a>
                    <a class="nav-item" data-tool="pdf-to-images" onclick="switchTool('pdf-to-images')">
                        <i class="fas fa-images"></i><span>PDF to Images</span>
                    </a>
                    <a class="nav-item" data-tool="images-to-pdf" onclick="switchTool('images-to-pdf')">
                        <i class="fas fa-file-image"></i><span>Images to PDF</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">UTILITY</div>
                    <a class="nav-item" data-tool="qr-generate" onclick="switchTool('qr-generate')">
                        <i class="fas fa-qrcode"></i><span>QR Code</span>
                    </a>
                    <a class="nav-item" data-tool="hash-generate" onclick="switchTool('hash-generate')">
                        <i class="fas fa-fingerprint"></i><span>Hash Generator</span>
                    </a>
                    <a class="nav-item" data-tool="base64" onclick="switchTool('base64')">
                        <i class="fas fa-code"></i><span>Base64</span>
                    </a>
                    <a class="nav-item" data-tool="json-format" onclick="switchTool('json-format')">
                        <i class="fas fa-file-code"></i><span>JSON Formatter</span>
                    </a>
                    <a class="nav-item" data-tool="color-convert" onclick="switchTool('color-convert')">
                        <i class="fas fa-palette"></i><span>Color Converter</span>
                    </a>
                    <a class="nav-item" data-tool="markdown-preview" onclick="switchTool('markdown-preview')">
                        <i class="fab fa-markdown"></i><span>Markdown Preview</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-credit"><i class="fas fa-bolt"></i> Built by <a href="https://github.com/Luma-exe" target="_blank" rel="noopener">Luma</a></div>
                <button class="install-app-btn hidden" id="installAppBtn" onclick="installPWA()">
                    <i class="fas fa-download"></i> Install App
                </button>
                <div class="server-status" id="serverStatus">
                    <div class="status-ticker">
                        <div class="ticker-track" id="tickerTrack">
                            <span class="status-text">Checking...</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Mobile header -->
        <div class="mobile-header" id="mobileHeader">
            <button class="mobile-menu-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
            <a class="mobile-logo" href="#" onclick="switchTool('landing'); return false;"><i class="fas fa-bolt"></i> LUMA<span>TOOLS</span></a>
        </div>

        <!-- ═══════════════ MAIN CONTENT ═══════════════ -->
        <main class="main-content">

            <!-- ──────────── LANDING / WELCOME PAGE ──────────── -->
            <div class="tool-panel active" id="tool-landing">
                <div class="landing-page">
                    <div class="landing-hero">
                        <div class="landing-logo-icon"><i class="fas fa-bolt"></i></div>
                        <h1 class="landing-title">LUMA<span>TOOLS</span></h1>
                        <p class="landing-tagline">A free media toolkit built for speed and privacy.</p>
                    </div>

                    <div class="landing-about">
                        <p>LumaTools was built out of frustration with bloated online converters full of ads and upload limits. We're upfront about how it works: <strong>almost every tool runs in your browser</strong>. Your files are processed locally using WebAssembly (FFmpeg in the browser) — they never leave your machine. The only tools that use our server are the ones that have to: video processing (trim, compress, to-GIF, etc.), PDF tools (Ghostscript), and the media downloader (yt-dlp). We don't store or log your files.</p>
                    </div>

                    <div class="landing-behind">
                        <h3>Behind the scenes</h3>
                        <div class="landing-behind-grid">
                            <div class="landing-behind-card in-browser">
                                <span class="landing-behind-badge"><i class="fas fa-lock"></i> In your browser</span>
                                <p>Image compress, resize, convert, crop, background remove, metadata strip. Audio convert (under ~50MB). Favicon generator. QR, Base64, JSON, color tools. Your data never leaves your device.</p>
                            </div>
                            <div class="landing-behind-card on-server">
                                <span class="landing-behind-badge"><i class="fas fa-server"></i> On our server</span>
                                <p>All video tools (compress, trim, to-GIF, speed, stabilize, etc.), PDF compress/merge/to-images, audio normalize, media downloader (YouTube, etc.), hash generator. Files are processed and deleted; we don't keep them.</p>
                            </div>
                        </div>
                    </div>

                    <div class="landing-drop-cta">
                        <div class="landing-drop-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <h2>Drop any file to get started</h2>
                        <p>Drag an image, video, audio, or PDF anywhere on this website. LumaTools will detect the file type and suggest the right tools instantly.</p>
                    </div>

                    <div class="landing-features">
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-wand-magic-sparkles"></i></div>
                            <h3>Smart Drag &amp; Drop</h3>
                            <p>Drop a file anywhere and a quick-action panel appears with every tool that matches your file type. No searching required.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-layer-group"></i></div>
                            <h3>Batch Processing</h3>
                            <p>Drop multiple files at once. LumaTools processes them in a queue and bundles the results into a single .zip download.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-microchip"></i></div>
                            <h3>Mostly in the browser</h3>
                            <p>Image and small-audio tools run entirely in your browser (FFmpeg.wasm). Video and PDF tools run on our server because they need native FFmpeg and Ghostscript — we're transparent about which is which.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-download"></i></div>
                            <h3>Install as an App</h3>
                            <p>LumaTools is a Progressive Web App. Install it to your desktop for instant access, offline support, and a native app experience.</p>
                        </div>
                    </div>

                    <div class="landing-tools-overview">
                        <h2>20+ Tools, Zero Ads</h2>
                        <div class="landing-tool-chips">
                            <span class="landing-chip" onclick="switchTool('downloader')"><i class="fas fa-download"></i> Media Downloader</span>
                            <span class="landing-chip" onclick="switchTool('image-compress')"><i class="fas fa-compress-alt"></i> Image Compress</span>
                            <span class="landing-chip" onclick="switchTool('image-resize')"><i class="fas fa-expand-arrows-alt"></i> Resize</span>
                            <span class="landing-chip" onclick="switchTool('image-convert')"><i class="fas fa-exchange-alt"></i> Convert</span>
                            <span class="landing-chip" onclick="switchTool('video-compress')"><i class="fas fa-file-video"></i> Video Compress</span>
                            <span class="landing-chip" onclick="switchTool('video-trim')"><i class="fas fa-cut"></i> Trim / Cut</span>
                            <span class="landing-chip" onclick="switchTool('video-to-gif')"><i class="fas fa-magic"></i> To GIF</span>
                            <span class="landing-chip" onclick="switchTool('audio-convert')"><i class="fas fa-headphones"></i> Audio Convert</span>
                            <span class="landing-chip" onclick="switchTool('pdf-compress')"><i class="fas fa-file-pdf"></i> PDF Compress</span>
                            <span class="landing-chip" onclick="switchTool('image-bg-remove')"><i class="fas fa-user-alt"></i> BG Remover</span>
                            <span class="landing-chip" onclick="switchTool('qr-generate')"><i class="fas fa-qrcode"></i> QR Code</span>
                            <span class="landing-chip" onclick="switchTool('json-format')"><i class="fas fa-file-code"></i> JSON Format</span>
                        </div>
                    </div>

                    <div class="landing-cta-row">
                        <button class="landing-cta-btn" onclick="switchTool('downloader')"><i class="fas fa-rocket"></i> Open Toolkit</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── MEDIA DOWNLOADER ──────────── -->
            <div class="tool-panel" id="tool-downloader">
                <div class="tool-header">
                    <h2><i class="fas fa-download"></i> Media Downloader</h2>
                    <p>Download videos and audio from any supported platform</p>
                </div>
                <div class="tool-body">
                    <!-- URL Input -->
                    <div class="input-section">
                        <div class="input-wrapper" id="inputWrapper">
                            <div class="platform-badge" id="platformBadge"><i class="fas fa-link"></i></div>
                            <input type="url" id="urlInput" placeholder="Paste any media URL here..." autocomplete="off" spellcheck="false">
                            <button class="analyze-btn" id="analyzeBtn" onclick="analyzeURL()"><i class="fas fa-search"></i><span>Analyze</span></button>
                        </div>
                        <div class="supported-platforms">
                            <span class="label">Supported:</span>
                            <div class="platform-icons">
                                <i class="fab fa-youtube" title="YouTube"></i>
                                <i class="fab fa-tiktok" title="TikTok"></i>
                                <i class="fab fa-instagram" title="Instagram"></i>
                                <i class="fab fa-spotify" title="Spotify"></i>
                                <i class="fab fa-soundcloud" title="SoundCloud"></i>
                                <i class="fab fa-x-twitter" title="X / Twitter"></i>
                                <i class="fab fa-facebook" title="Facebook"></i>
                                <i class="fab fa-twitch" title="Twitch"></i>
                                <i class="fab fa-reddit-alien" title="Reddit"></i>
                                <i class="fas fa-ellipsis" title="And more..."></i>
                            </div>
                        </div>
                    </div>

                    <!-- Loading -->
                    <div class="dl-section hidden" id="loadingSection">
                        <div class="loader"><div class="loader-ring"></div><div class="loader-ring"></div><div class="loader-ring"></div></div>
                        <p class="loading-text">Analyzing media...</p>
                    </div>

                    <!-- Error -->
                    <div class="dl-section hidden" id="errorSection">
                        <div class="error-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <p class="error-text" id="errorText">Something went wrong</p>
                        <button class="retry-btn" onclick="retryAnalysis()"><i class="fas fa-redo"></i> Try Again</button>
                    </div>

                    <!-- Playlist -->
                    <div class="dl-section hidden" id="playlistSection">
                        <div class="playlist-header">
                            <div class="playlist-info">
                                <div class="playlist-icon"><i class="fas fa-list-ul"></i></div>
                                <div><h2 id="playlistTitle">Playlist</h2><p class="playlist-meta"><span id="playlistCount">0 items</span><span class="dot-sep">&bull;</span><span id="playlistUploader">Unknown</span></p></div>
                            </div>
                            <div class="playlist-actions">
                                <button class="playlist-select-btn" onclick="toggleSelectAll()"><i class="fas fa-check-double" id="selectAllIcon"></i><span id="selectAllText">Select All</span></button>
                            </div>
                        </div>
                        <div class="playlist-items" id="playlistItems"></div>
                        <div class="playlist-resolving hidden" id="playlistResolving">
                            <div class="resolving-content"><i class="fas fa-circle-notch fa-spin"></i><span id="resolvingText">Loading track names...</span></div>
                            <button class="resolving-skip-btn hidden" id="resolvingSkipBtn" onclick="skipResolving()"><i class="fas fa-forward"></i> Skip</button>
                        </div>
                        <div class="playlist-footer">
                            <div class="playlist-selected-count"><span id="selectedCount">0</span> selected</div>
                            <div class="format-tabs playlist-format-tabs" id="playlistFormatTabs">
                                <button class="format-tab active" data-format="mp3" onclick="selectFormat('mp3')"><i class="fas fa-music"></i><span>MP3</span></button>
                                <button class="format-tab" data-format="mp4" onclick="selectFormat('mp4')"><i class="fas fa-video"></i><span>MP4</span></button>
                            </div>
                            <button class="download-btn" id="playlistDownloadBtn" onclick="startPlaylistDownload()"><div class="btn-content"><i class="fas fa-download"></i><span>Download Selected</span></div></button>
                        </div>
                    </div>

                    <!-- Batch Progress -->
                    <div class="dl-section hidden" id="batchProgressSection">
                        <div class="batch-header">
                            <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                            <div class="progress-info"><h3 id="batchTitle">Downloading playlist...</h3><p id="batchStatus">Starting...</p></div>
                        </div>
                        <div class="batch-overall">
                            <div class="progress-bar-container"><div class="progress-bar" id="batchOverallBar"></div></div>
                            <div class="batch-overall-label"><span id="batchCurrentNum">0</span> / <span id="batchTotalNum">0</span> files</div>
                        </div>
                        <div class="batch-current-item" id="batchCurrentItem">
                            <div class="batch-item-name" id="batchItemName"></div>
                            <div class="progress-bar-container small"><div class="progress-bar" id="batchItemBar"></div></div>
                            <div class="progress-details"><span class="progress-pct" id="batchItemPct"></span><span class="progress-speed" id="batchItemSpeed"></span><span class="progress-eta" id="batchItemEta"></span></div>
                        </div>
                    </div>

                    <!-- Batch Complete -->
                    <div class="dl-section hidden" id="batchCompleteSection">
                        <div class="complete-icon"><i class="fas fa-check-circle"></i></div>
                        <h3 id="batchCompleteText">All downloads complete!</h3>
                        <div class="batch-files" id="batchFiles"></div>
                        <button class="new-download-btn" onclick="resetDownloaderUI()"><i class="fas fa-plus"></i> New Download</button>
                    </div>

                    <!-- Media Info -->
                    <div class="dl-section hidden" id="mediaSection">
                        <div class="media-preview">
                            <div class="thumbnail-container">
                                <img id="mediaThumbnail" src="" alt="Thumbnail">
                                <div class="duration-badge" id="mediaDuration">0:00</div>
                                <div class="platform-overlay" id="platformOverlay"><i class="fab fa-youtube"></i></div>
                            </div>
                            <div class="media-info">
                                <h2 id="mediaTitle">Media Title</h2>
                                <p class="media-uploader" id="mediaUploader"><i class="fas fa-user"></i><span>Uploader</span></p>
                            </div>
                        </div>
                        <div class="format-section">
                            <h3><i class="fas fa-sliders-h"></i> Download Options</h3>
                            <div class="format-tabs" id="formatTabs">
                                <button class="format-tab active" data-format="mp3" onclick="selectFormat('mp3')"><i class="fas fa-music"></i><span>MP3</span><small>Audio Only</small></button>
                                <button class="format-tab" data-format="mp4" onclick="selectFormat('mp4')"><i class="fas fa-video"></i><span>MP4</span><small>Video</small></button>
                            </div>
                            <div class="quality-section hidden" id="qualitySection">
                                <h4><i class="fas fa-film"></i> Video Quality</h4>
                                <div class="quality-grid" id="qualityGrid"></div>
                            </div>
                            <button class="download-btn" id="downloadBtn" onclick="startDownload()"><div class="btn-content"><i class="fas fa-download"></i><span>Download</span></div><div class="btn-progress" id="btnProgress"></div></button>
                        </div>
                    </div>

                    <!-- Download Progress -->
                    <div class="dl-section hidden" id="progressSection">
                        <div class="progress-header">
                            <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                            <div class="progress-info"><h3 id="progressTitle">Downloading...</h3><p id="progressStatus">Starting download</p></div>
                        </div>
                        <div class="progress-bar-container"><div class="progress-bar" id="progressBar"></div></div>
                        <div class="progress-details"><span class="progress-pct" id="progressPct"></span><span class="progress-speed" id="progressSpeed"></span><span class="progress-eta" id="progressEta"></span><span class="progress-size" id="progressSize"></span></div>
                    </div>

                    <!-- Download Complete -->
                    <div class="dl-section hidden" id="completeSection">
                        <div class="complete-icon"><i class="fas fa-check-circle"></i></div>
                        <h3>Download Ready!</h3>
                        <a class="save-btn" id="saveBtn" href="#" download><i class="fas fa-save"></i><span>Save File</span></a>
                        <button class="new-download-btn" onclick="resetDownloaderUI()"><i class="fas fa-plus"></i> New Download</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-image-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-compress-alt"></i> Image Compress</h2>
                    <p>Reduce image file size while maintaining quality</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-compress" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-compress">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Quality</label>
                        <div class="slider-group"><input type="range" min="10" max="100" value="75" class="quality-slider" id="imageCompressQuality" oninput="document.getElementById('imageCompressQualityVal').textContent=this.value+'%'"><span class="slider-value" id="imageCompressQualityVal">75%</span></div>
                        <small class="option-hint">Lower = smaller file, less quality</small>
                    </div>
                    <button class="process-btn" onclick="processFile('image-compress')"><i class="fas fa-compress-alt"></i> Compress Image</button>
                    <div class="processing-status hidden" data-tool="image-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE RESIZE ──────────── -->
            <div class="tool-panel" id="tool-image-resize">
                <div class="tool-header">
                    <h2><i class="fas fa-expand-arrows-alt"></i> Image Resize</h2>
                    <p>Change image dimensions while preserving aspect ratio</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-resize" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-resize">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-resize')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Dimensions</label>
                        <div class="dimension-inputs">
                            <div class="dim-group"><label>Width</label><input type="number" id="resizeWidth" placeholder="Auto" min="1" max="10000"></div>
                            <div class="dim-lock active" id="dimLock" onclick="toggleAspectLock()"><i class="fas fa-link"></i></div>
                            <div class="dim-group"><label>Height</label><input type="number" id="resizeHeight" placeholder="Auto" min="1" max="10000"></div>
                        </div>
                        <small class="option-hint">Leave one blank to keep aspect ratio</small>
                    </div>
                    <button class="process-btn" onclick="processFile('image-resize')"><i class="fas fa-expand-arrows-alt"></i> Resize Image</button>
                    <div class="processing-status hidden" data-tool="image-resize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-resize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE CONVERT ──────────── -->
            <div class="tool-panel" id="tool-image-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-exchange-alt"></i> Image Convert</h2>
                    <p>Convert between PNG, JPEG, WebP, BMP, TIFF, ICO and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-convert" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, ICO, GIF &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-convert">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="image-convert">
                            <button class="fmt-btn active" data-fmt="png" onclick="selectOutputFmt(this)">PNG</button>
                            <button class="fmt-btn" data-fmt="jpg" onclick="selectOutputFmt(this)">JPEG</button>
                            <button class="fmt-btn" data-fmt="webp" onclick="selectOutputFmt(this)">WebP</button>
                            <button class="fmt-btn" data-fmt="bmp" onclick="selectOutputFmt(this)">BMP</button>
                            <button class="fmt-btn" data-fmt="tiff" onclick="selectOutputFmt(this)">TIFF</button>
                            <button class="fmt-btn" data-fmt="ico" onclick="selectOutputFmt(this)">ICO</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('image-convert')"><i class="fas fa-exchange-alt"></i> Convert Image</button>
                    <div class="processing-status hidden" data-tool="image-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-video-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-file-video"></i> Video Compress</h2>
                    <p>Reduce video file size with adjustable quality</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-compress" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-compress">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Compression Level</label>
                        <div class="preset-grid" data-tool="video-compress">
                            <button class="preset-btn" data-val="light" onclick="selectPreset(this)"><i class="fas fa-feather"></i><span>Light</span><small>~70% size</small></button>
                            <button class="preset-btn active" data-val="medium" onclick="selectPreset(this)"><i class="fas fa-balance-scale"></i><span>Medium</span><small>~50% size</small></button>
                            <button class="preset-btn" data-val="heavy" onclick="selectPreset(this)"><i class="fas fa-compress-arrows-alt"></i><span>Heavy</span><small>~30% size</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-compress')"><i class="fas fa-compress-alt"></i> Compress Video</button>
                    <div class="processing-status hidden" data-tool="video-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO TRIM ──────────── -->
            <div class="tool-panel" id="tool-video-trim">
                <div class="tool-header">
                    <h2><i class="fas fa-cut"></i> Video Trim / Cut</h2>
                    <p>Extract a segment from your video by setting start and end times</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-trim" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-trim">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-trim')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-video-trim" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformVideoTrim"></div>
                        <div class="waveform-timer"><span id="waveformTrimStart">00:00</span> &ndash; <span id="waveformTrimEnd">00:00</span></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Time Range</label>
                        <div class="time-inputs">
                            <div class="time-group"><label>Start</label><input type="text" id="trimStart" placeholder="00:00:00.000" value="00:00:00"></div>
                            <span class="time-arrow"><i class="fas fa-arrow-right"></i></span>
                            <div class="time-group"><label>End</label><input type="text" id="trimEnd" placeholder="00:01:00.000"></div>
                        </div>
                        <small class="option-hint">Format: HH:MM:SS or HH:MM:SS.mmm for frame precision</small>
                        <label class="option-label" style="margin-top:12px">Cut Mode</label>
                        <div class="preset-grid" data-tool="video-trim-mode">
                            <button class="preset-btn active" data-val="fast" onclick="selectPreset(this)"><i class="fas fa-bolt"></i><span>Fast</span><small>Keyframe aligned</small></button>
                            <button class="preset-btn" data-val="precise" onclick="selectPreset(this)"><i class="fas fa-crosshairs"></i><span>Precise</span><small>Frame-accurate</small></button>
                        </div>
                        <small class="option-hint">Precise re-encodes for exact frame cuts (slower, outputs MP4)</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-trim')"><i class="fas fa-cut"></i> Trim Video</button>
                    <div class="processing-status hidden" data-tool="video-trim"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-trim">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO CONVERT ──────────── -->
            <div class="tool-panel" id="tool-video-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-film"></i> Video Convert</h2>
                    <p>Convert between MP4, WebM, AVI, MOV, MKV and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-convert" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV, FLV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-convert">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="video-convert">
                            <button class="fmt-btn active" data-fmt="mp4" onclick="selectOutputFmt(this)">MP4</button>
                            <button class="fmt-btn" data-fmt="webm" onclick="selectOutputFmt(this)">WebM</button>
                            <button class="fmt-btn" data-fmt="avi" onclick="selectOutputFmt(this)">AVI</button>
                            <button class="fmt-btn" data-fmt="mov" onclick="selectOutputFmt(this)">MOV</button>
                            <button class="fmt-btn" data-fmt="mkv" onclick="selectOutputFmt(this)">MKV</button>
                            <button class="fmt-btn" data-fmt="gif" onclick="selectOutputFmt(this)">GIF</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-convert')"><i class="fas fa-film"></i> Convert Video</button>
                    <div class="processing-status hidden" data-tool="video-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO EXTRACT AUDIO ──────────── -->
            <div class="tool-panel" id="tool-video-extract-audio">
                <div class="tool-header">
                    <h2><i class="fas fa-volume-up"></i> Extract Audio</h2>
                    <p>Extract the audio track from any video file</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-extract-audio" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-extract-audio">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-extract-audio')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-video-extract-audio" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformVideoExtract"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Audio Format</label>
                        <div class="format-select-grid" data-tool="video-extract-audio">
                            <button class="fmt-btn active" data-fmt="mp3" onclick="selectOutputFmt(this)">MP3</button>
                            <button class="fmt-btn" data-fmt="wav" onclick="selectOutputFmt(this)">WAV</button>
                            <button class="fmt-btn" data-fmt="flac" onclick="selectOutputFmt(this)">FLAC</button>
                            <button class="fmt-btn" data-fmt="aac" onclick="selectOutputFmt(this)">AAC</button>
                            <button class="fmt-btn" data-fmt="ogg" onclick="selectOutputFmt(this)">OGG</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-extract-audio')"><i class="fas fa-volume-up"></i> Extract Audio</button>
                    <div class="processing-status hidden" data-tool="video-extract-audio"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="video-extract-audio">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── AUDIO CONVERT ──────────── -->
            <div class="tool-panel" id="tool-audio-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-headphones"></i> Audio Convert</h2>
                    <p>Convert between MP3, WAV, FLAC, OGG, AAC, M4A and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-audio-convert" data-accept="audio/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your audio file here</p><span>or click to browse</span><small>MP3, WAV, FLAC, OGG, AAC, M4A, WMA &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="audio/*,.mp3,.wav,.flac,.ogg,.aac,.m4a,.wma">
                    </div>
                    <div class="file-preview hidden" data-tool="audio-convert">
                        <div class="file-info"><i class="fas fa-music"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('audio-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-audio-convert" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformAudioConvert"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="audio-convert">
                            <button class="fmt-btn active" data-fmt="mp3" onclick="selectOutputFmt(this)">MP3</button>
                            <button class="fmt-btn" data-fmt="wav" onclick="selectOutputFmt(this)">WAV</button>
                            <button class="fmt-btn" data-fmt="flac" onclick="selectOutputFmt(this)">FLAC</button>
                            <button class="fmt-btn" data-fmt="ogg" onclick="selectOutputFmt(this)">OGG</button>
                            <button class="fmt-btn" data-fmt="aac" onclick="selectOutputFmt(this)">AAC</button>
                            <button class="fmt-btn" data-fmt="m4a" onclick="selectOutputFmt(this)">M4A</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('audio-convert')"><i class="fas fa-headphones"></i> Convert Audio</button>
                    <div class="processing-status hidden" data-tool="audio-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="audio-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-pdf-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-file-pdf"></i> PDF Compress</h2>
                    <p>Reduce PDF file size for easy sharing</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-pdf-compress" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your PDF here</p><span>or click to browse</span><small>PDF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf">
                    </div>
                    <div class="file-preview hidden" data-tool="pdf-compress">
                        <div class="file-info"><i class="fas fa-file-pdf"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('pdf-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Compression Level</label>
                        <div class="preset-grid" data-tool="pdf-compress">
                            <button class="preset-btn" data-val="screen" onclick="selectPreset(this)"><i class="fas fa-mobile-alt"></i><span>Screen</span><small>Smallest</small></button>
                            <button class="preset-btn active" data-val="ebook" onclick="selectPreset(this)"><i class="fas fa-book"></i><span>eBook</span><small>Balanced</small></button>
                            <button class="preset-btn" data-val="printer" onclick="selectPreset(this)"><i class="fas fa-print"></i><span>Print</span><small>High quality</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('pdf-compress')"><i class="fas fa-compress-alt"></i> Compress PDF</button>
                    <div class="processing-status hidden" data-tool="pdf-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="pdf-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF MERGE ──────────── -->
            <div class="tool-panel" id="tool-pdf-merge">
                <div class="tool-header">
                    <h2><i class="fas fa-object-group"></i> PDF Merge</h2>
                    <p>Combine multiple PDF files into one document</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone multi" id="uz-pdf-merge" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop PDF files here</p><span>or click to browse (select multiple)</span><small>PDF files &mdash; Max 100 MB total</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf" multiple>
                    </div>
                    <div class="multi-file-list hidden" data-tool="pdf-merge"></div>
                    <button class="process-btn" onclick="processFile('pdf-merge')"><i class="fas fa-object-group"></i> Merge PDFs</button>
                    <div class="processing-status hidden" data-tool="pdf-merge"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Merging...</span></div>
                    <div class="result-section hidden" data-tool="pdf-merge">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF TO IMAGES ──────────── -->
            <div class="tool-panel" id="tool-pdf-to-images">
                <div class="tool-header">
                    <h2><i class="fas fa-images"></i> PDF to Images</h2>
                    <p>Convert each page of a PDF into a separate image</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-pdf-to-images" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your PDF here</p><span>or click to browse</span><small>PDF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf">
                    </div>
                    <div class="file-preview hidden" data-tool="pdf-to-images">
                        <div class="file-info"><i class="fas fa-file-pdf"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('pdf-to-images')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Image Format</label>
                        <div class="format-select-grid" data-tool="pdf-to-images">
                            <button class="fmt-btn active" data-fmt="png" onclick="selectOutputFmt(this)">PNG</button>
                            <button class="fmt-btn" data-fmt="jpg" onclick="selectOutputFmt(this)">JPEG</button>
                        </div>
                        <label class="option-label" style="margin-top:12px">DPI (Resolution)</label>
                        <div class="slider-group"><input type="range" min="72" max="600" value="200" step="1" class="quality-slider" id="pdfDpi" oninput="document.getElementById('pdfDpiVal').textContent=this.value+' DPI'"><span class="slider-value" id="pdfDpiVal">200 DPI</span></div>
                    </div>
                    <button class="process-btn" onclick="processFile('pdf-to-images')"><i class="fas fa-images"></i> Convert to Images</button>
                    <div class="processing-status hidden" data-tool="pdf-to-images"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="pdf-to-images">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download ZIP</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── METADATA STRIP ──────────── -->
            <div class="tool-panel" id="tool-metadata-strip">
                <div class="tool-header">
                    <h2><i class="fas fa-eraser"></i> Metadata Strip</h2>
                    <p>Remove EXIF data, GPS coordinates, camera info and other metadata from files</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-metadata-strip" data-accept="image/*,video/*,audio/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your file here</p><span>or click to browse</span><small>Images, Videos, Audio &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*,video/*,audio/*">
                    </div>
                    <div class="file-preview hidden" data-tool="metadata-strip">
                        <div class="file-info"><i class="fas fa-file"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('metadata-strip')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('metadata-strip')"><i class="fas fa-eraser"></i> Strip Metadata</button>
                    <div class="processing-status hidden" data-tool="metadata-strip"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="metadata-strip">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── FAVICON GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-favicon-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-star"></i> Favicon Generator</h2>
                    <p>Generate favicons in all standard sizes from a single image</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-favicon-generate" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP &mdash; Square image recommended &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="favicon-generate">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('favicon-generate')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('favicon-generate')"><i class="fas fa-star"></i> Generate Favicons</button>
                    <div class="processing-status hidden" data-tool="favicon-generate"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Generating...</span></div>
                    <div class="result-section hidden" data-tool="favicon-generate">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO TO GIF ──────────── -->
            <div class="tool-panel" id="tool-video-to-gif">
                <div class="tool-header">
                    <h2><i class="fas fa-magic"></i> Video to GIF</h2>
                    <p>Convert video clips into high-quality animated GIFs</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-to-gif" data-accept="video/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-to-gif">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-to-gif')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">FPS</label>
                        <div class="slider-group"><input type="range" min="5" max="30" value="15" class="quality-slider" id="gifFps" oninput="document.getElementById('gifFpsVal').textContent=this.value+' fps'"><span class="slider-value" id="gifFpsVal">15 fps</span></div>
                        <label class="option-label" style="margin-top:12px">Width (px)</label>
                        <div class="slider-group"><input type="range" min="120" max="1280" value="480" step="10" class="quality-slider" id="gifWidth" oninput="document.getElementById('gifWidthVal').textContent=this.value+'px'"><span class="slider-value" id="gifWidthVal">480px</span></div>
                        <small class="option-hint">Height auto-scales to keep aspect ratio</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-to-gif')"><i class="fas fa-magic"></i> Convert to GIF</button>
                    <div class="processing-status hidden" data-tool="video-to-gif"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-to-gif">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── GIF TO VIDEO ──────────── -->
            <div class="tool-panel" id="tool-gif-to-video">
                <div class="tool-header">
                    <h2><i class="fas fa-photo-video"></i> GIF to Video</h2>
                    <p>Convert animated GIFs into MP4 videos for smaller file sizes</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-gif-to-video" data-accept=".gif,image/gif" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your GIF here</p><span>or click to browse</span><small>GIF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".gif,image/gif">
                    </div>
                    <div class="file-preview hidden" data-tool="gif-to-video">
                        <div class="file-info"><i class="fas fa-file-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('gif-to-video')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('gif-to-video')"><i class="fas fa-photo-video"></i> Convert to MP4</button>
                    <div class="processing-status hidden" data-tool="gif-to-video"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="gif-to-video">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO REMOVE AUDIO ──────────── -->
            <div class="tool-panel" id="tool-video-remove-audio">
                <div class="tool-header">
                    <h2><i class="fas fa-volume-mute"></i> Remove Audio</h2>
                    <p>Strip the audio track from a video, keeping only the visuals</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-remove-audio" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-remove-audio">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-remove-audio')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('video-remove-audio')"><i class="fas fa-volume-mute"></i> Remove Audio</button>
                    <div class="processing-status hidden" data-tool="video-remove-audio"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-remove-audio">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO SPEED ──────────── -->
            <div class="tool-panel" id="tool-video-speed">
                <div class="tool-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Video Speed Change</h2>
                    <p>Speed up or slow down your video (0.25x to 4x)</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-speed" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-speed">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-speed')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Speed</label>
                        <div class="slider-group"><input type="range" min="0.25" max="4" value="2" step="0.25" class="quality-slider" id="videoSpeed" oninput="document.getElementById('videoSpeedVal').textContent=this.value+'x'"><span class="slider-value" id="videoSpeedVal">2x</span></div>
                        <div class="preset-grid" data-tool="video-speed-presets" style="margin-top:8px">
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=0.5;document.getElementById('videoSpeedVal').textContent='0.5x'"><span>0.5x</span><small>Slow</small></button>
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=1.5;document.getElementById('videoSpeedVal').textContent='1.5x'"><span>1.5x</span><small>Faster</small></button>
                            <button class="preset-btn active" onclick="document.getElementById('videoSpeed').value=2;document.getElementById('videoSpeedVal').textContent='2x'"><span>2x</span><small>Double</small></button>
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=4;document.getElementById('videoSpeedVal').textContent='4x'"><span>4x</span><small>Max</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-speed')"><i class="fas fa-tachometer-alt"></i> Change Speed</button>
                    <div class="processing-status hidden" data-tool="video-speed"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-speed">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO FRAME EXTRACT ──────────── -->
            <div class="tool-panel" id="tool-video-frame">
                <div class="tool-header">
                    <h2><i class="fas fa-camera"></i> Video Frame Extract</h2>
                    <p>Capture a single frame from any video at a specific timestamp</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-frame" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-frame">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-frame')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Timestamp</label>
                        <div class="time-inputs">
                            <div class="time-group" style="flex:1"><label>Time</label><input type="text" id="frameTimestamp" placeholder="00:00:05" value="00:00:00"></div>
                        </div>
                        <small class="option-hint">Format: HH:MM:SS or HH:MM:SS.mmm</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-frame')"><i class="fas fa-camera"></i> Extract Frame</button>
                    <div class="processing-status hidden" data-tool="video-frame"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="video-frame">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO STABILIZE ──────────── -->
            <div class="tool-panel" id="tool-video-stabilize">
                <div class="tool-header">
                    <h2><i class="fas fa-hand-paper"></i> Video Stabilize</h2>
                    <p>Reduce camera shake and jitter from handheld footage</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-stabilize" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-stabilize">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-stabilize')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('video-stabilize')"><i class="fas fa-hand-paper"></i> Stabilize Video</button>
                    <div class="processing-status hidden" data-tool="video-stabilize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-stabilize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── SUBTITLE EXTRACT ──────────── -->
            <div class="tool-panel" id="tool-subtitle-extract">
                <div class="tool-header">
                    <h2><i class="fas fa-closed-captioning"></i> Subtitle Extract</h2>
                    <p>Extract embedded subtitle tracks from video files</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-subtitle-extract" data-accept="video/*,.mkv,.mp4,.avi" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MKV, MP4, AVI (with embedded subs) &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*,.mkv,.mp4,.avi">
                    </div>
                    <div class="file-preview hidden" data-tool="subtitle-extract">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('subtitle-extract')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="subtitle-extract">
                            <button class="fmt-btn active" data-fmt="srt" onclick="selectOutputFmt(this)">SRT</button>
                            <button class="fmt-btn" data-fmt="vtt" onclick="selectOutputFmt(this)">VTT</button>
                            <button class="fmt-btn" data-fmt="ass" onclick="selectOutputFmt(this)">ASS</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('subtitle-extract')"><i class="fas fa-closed-captioning"></i> Extract Subtitles</button>
                    <div class="processing-status hidden" data-tool="subtitle-extract"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="subtitle-extract">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── AUDIO NORMALIZE ──────────── -->
            <div class="tool-panel" id="tool-audio-normalize">
                <div class="tool-header">
                    <h2><i class="fas fa-balance-scale-right"></i> Audio Normalize</h2>
                    <p>Automatically adjust audio volume to a consistent level (EBU R128)</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-audio-normalize" data-accept="audio/*,video/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your audio file here</p><span>or click to browse</span><small>MP3, WAV, FLAC, AAC, M4A, MP4 &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="audio/*,video/*,.mp3,.wav,.flac,.ogg,.aac,.m4a">
                    </div>
                    <div class="file-preview hidden" data-tool="audio-normalize">
                        <div class="file-info"><i class="fas fa-music"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('audio-normalize')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('audio-normalize')"><i class="fas fa-balance-scale-right"></i> Normalize Audio</button>
                    <div class="processing-status hidden" data-tool="audio-normalize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="audio-normalize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGES TO PDF ──────────── -->
            <div class="tool-panel" id="tool-images-to-pdf">
                <div class="tool-header">
                    <h2><i class="fas fa-file-image"></i> Images to PDF</h2>
                    <p>Combine multiple images into a single PDF document</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone multi" id="uz-images-to-pdf" data-accept="image/*" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop images here</p><span>or click to browse (select multiple)</span><small>PNG, JPEG, WebP, BMP &mdash; Max 100 MB total</small></div>
                        <input type="file" class="upload-input" accept="image/*" multiple>
                    </div>
                    <div class="multi-file-list hidden" data-tool="images-to-pdf"></div>
                    <button class="process-btn" onclick="processFile('images-to-pdf')"><i class="fas fa-file-image"></i> Create PDF</button>
                    <div class="processing-status hidden" data-tool="images-to-pdf"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="images-to-pdf">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── QR CODE GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-qr-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-qrcode"></i> QR Code Generator</h2>
                    <p>Generate QR codes from text, URLs, or any data</p>
                </div>
                <div class="tool-body">
                    <div class="text-tool-input">
                        <label class="option-label">Content</label>
                        <textarea id="qrInput" class="text-area-input" rows="3" placeholder="Enter text, URL, email, phone number..."></textarea>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Size</label>
                        <div class="slider-group"><input type="range" min="3" max="10" value="6" class="quality-slider" id="qrSize" oninput="document.getElementById('qrSizeVal').textContent=(['Tiny','','Small','','Medium','','Large',''][this.value-3]||'XL')"><span class="slider-value" id="qrSizeVal">Large</span></div>
                    </div>
                    <button class="process-btn" onclick="generateQR()"><i class="fas fa-qrcode"></i> Generate QR Code</button>
                    <div class="qr-output hidden" id="qrOutput">
                        <div class="qr-canvas-wrap" id="qrCanvasWrap"></div>
                        <button class="process-btn" style="margin-top:12px" onclick="downloadQR()"><i class="fas fa-download"></i> Download PNG</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── HASH GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-hash-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-fingerprint"></i> Hash Generator</h2>
                    <p>Calculate MD5, SHA1 and SHA256 checksums of any file</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-hash-generate" data-accept="*/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop any file here</p><span>or click to browse</span><small>Any file type &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input">
                    </div>
                    <div class="file-preview hidden" data-tool="hash-generate">
                        <div class="file-info"><i class="fas fa-file"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('hash-generate')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('hash-generate')"><i class="fas fa-fingerprint"></i> Generate Hashes</button>
                    <div class="processing-status hidden" data-tool="hash-generate"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="hash-results hidden" id="hashResults"></div>
                </div>
            </div>

            <!-- ──────────── BASE64 ──────────── -->
            <div class="tool-panel" id="tool-base64">
                <div class="tool-header">
                    <h2><i class="fas fa-code"></i> Base64 Encode / Decode</h2>
                    <p>Convert text or files to and from Base64 encoding</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options">
                        <label class="option-label">Mode</label>
                        <div class="format-select-grid" data-tool="base64-mode">
                            <button class="fmt-btn active" data-fmt="encode" onclick="selectOutputFmt(this)">Encode</button>
                            <button class="fmt-btn" data-fmt="decode" onclick="selectOutputFmt(this)">Decode</button>
                        </div>
                    </div>
                    <div class="text-tool-input">
                        <label class="option-label">Input</label>
                        <textarea id="base64Input" class="text-area-input" rows="5" placeholder="Paste text here..."></textarea>
                    </div>
                    <button class="process-btn" onclick="processBase64()"><i class="fas fa-code"></i> Convert</button>
                    <div class="text-tool-input">
                        <label class="option-label">Output</label>
                        <textarea id="base64Output" class="text-area-input" rows="5" readonly placeholder="Result will appear here..."></textarea>
                        <button class="copy-btn hidden" id="base64CopyBtn" onclick="copyToClipboard('base64Output')"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── JSON FORMATTER ──────────── -->
            <div class="tool-panel" id="tool-json-format">
                <div class="tool-header">
                    <h2><i class="fas fa-file-code"></i> JSON Formatter</h2>
                    <p>Format, validate, and beautify JSON data</p>
                </div>
                <div class="tool-body">
                    <div class="text-tool-input">
                        <label class="option-label">Input JSON</label>
                        <textarea id="jsonInput" class="text-area-input mono" rows="8" placeholder='{"key": "value", "nested": {"a":1}}'></textarea>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Indent</label>
                        <div class="format-select-grid" data-tool="json-indent">
                            <button class="fmt-btn" data-fmt="2" onclick="selectOutputFmt(this)">2 Spaces</button>
                            <button class="fmt-btn active" data-fmt="4" onclick="selectOutputFmt(this)">4 Spaces</button>
                            <button class="fmt-btn" data-fmt="tab" onclick="selectOutputFmt(this)">Tabs</button>
                            <button class="fmt-btn" data-fmt="0" onclick="selectOutputFmt(this)">Minify</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="formatJSON()"><i class="fas fa-check"></i> Format JSON</button>
                    <div class="text-tool-input" style="margin-top:16px">
                        <label class="option-label">Output</label>
                        <textarea id="jsonOutput" class="text-area-input mono" rows="10" readonly placeholder="Formatted JSON will appear here..."></textarea>
                        <button class="copy-btn hidden" id="jsonCopyBtn" onclick="copyToClipboard('jsonOutput')"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── COLOR CONVERTER ──────────── -->
            <div class="tool-panel" id="tool-color-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-palette"></i> Color Converter</h2>
                    <p>Convert between HEX, RGB, and HSL color formats</p>
                </div>
                <div class="tool-body">
                    <div class="color-tabs">
                        <button class="color-tab active" onclick="switchColorTab('inputs')"><i class="fas fa-sliders-h"></i> Values</button>
                        <button class="color-tab" onclick="switchColorTab('wheel')"><i class="fas fa-circle-notch"></i> Color Wheel</button>
                    </div>
                    <div class="color-tab-content active" id="colorTabInputs">
                        <div class="color-input-section">
                            <div class="color-preview-box" id="colorPreview" style="background:#6366f1"></div>
                            <div class="color-inputs-grid">
                                <div class="color-field"><label>HEX</label><input type="text" id="colorHex" value="#6366f1" oninput="updateColorFrom('hex')"></div>
                                <div class="color-field"><label>RGB</label><input type="text" id="colorRgb" value="99, 102, 241" oninput="updateColorFrom('rgb')"></div>
                                <div class="color-field"><label>HSL</label><input type="text" id="colorHsl" value="239, 84%, 67%" oninput="updateColorFrom('hsl')"></div>
                            </div>
                        </div>
                    </div>
                    <div class="color-tab-content" id="colorTabWheel">
                        <div class="color-wheel-section">
                            <div class="color-wheel-wrap">
                                <canvas id="colorWheel" width="240" height="240"></canvas>
                                <div class="color-wheel-cursor" id="wheelCursor"></div>
                            </div>
                            <div class="color-brightness-wrap">
                                <label>Brightness</label>
                                <input type="range" id="wheelBrightness" min="0" max="100" value="100" oninput="updateWheelBrightness()">
                            </div>
                            <div style="margin-top:16px">
                                <div class="color-input-section">
                                    <div class="color-preview-box" id="colorPreviewWheel" style="background:#6366f1"></div>
                                    <div class="color-inputs-grid">
                                        <div class="color-field"><label>HEX</label><input type="text" id="colorHexWheel" value="#6366f1" readonly></div>
                                        <div class="color-field"><label>RGB</label><input type="text" id="colorRgbWheel" value="99, 102, 241" readonly></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE CROP ──────────── -->
            <div class="tool-panel" id="tool-image-crop">
                <div class="tool-header">
                    <h2><i class="fas fa-crop-alt"></i> Image Crop</h2>
                    <p>Crop images to a specific region or aspect ratio</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-crop" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-crop">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('image-crop')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="crop-canvas-wrap hidden" id="cropCanvasWrap">
                        <canvas id="cropCanvas"></canvas>
                        <div class="crop-selection" id="cropSelection"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Aspect Ratio</label>
                        <div class="format-select-grid" data-tool="crop-ratio">
                            <button class="fmt-btn active" data-fmt="free" onclick="selectOutputFmt(this); setCropRatio('free')">Free</button>
                            <button class="fmt-btn" data-fmt="1:1" onclick="selectOutputFmt(this); setCropRatio('1:1')">1:1</button>
                            <button class="fmt-btn" data-fmt="16:9" onclick="selectOutputFmt(this); setCropRatio('16:9')">16:9</button>
                            <button class="fmt-btn" data-fmt="4:3" onclick="selectOutputFmt(this); setCropRatio('4:3')">4:3</button>
                            <button class="fmt-btn" data-fmt="9:16" onclick="selectOutputFmt(this); setCropRatio('9:16')">9:16</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('image-crop')"><i class="fas fa-crop-alt"></i> Crop Image</button>
                    <div class="processing-status hidden" data-tool="image-crop"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Cropping...</span></div>
                    <div class="result-section hidden" data-tool="image-crop">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PRIVACY REDACTION ──────────── -->
            <div class="tool-panel" id="tool-redact">
                <div class="tool-header">
                    <h2><i class="fas fa-user-secret"></i> Privacy Redaction</h2>
                    <p>Hide sensitive info in images or videos by drawing black boxes or blur regions.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-redact" data-accept="image/*,video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image or video here</p><span>or click to browse</span><small>PNG, JPEG, WebP, MP4, MOV, AVI &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*,video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="redact">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('redact')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="redact-canvas-wrap hidden" id="redactCanvasWrap">
                        <canvas id="redactCanvas"></canvas>
                        <div class="redact-tools">
                            <button class="redact-tool-btn active" id="redactBoxBtn" title="Draw black box"><i class="fas fa-square"></i></button>
                            <button class="redact-tool-btn" id="redactBlurBtn" title="Blur region"><i class="fas fa-water"></i></button>
                            <button class="redact-tool-btn" id="redactUndoBtn" title="Undo"><i class="fas fa-undo"></i></button>
                            <button class="redact-tool-btn" id="redactClearBtn" title="Clear all"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    <div class="tool-options">
                        <span class="option-hint">Draw over areas to redact. For videos, redactions apply to all frames.</span>
                    </div>
                    <button class="process-btn" onclick="processFile('redact')"><i class="fas fa-user-secret"></i> Apply Redaction</button>
                    <div class="processing-status hidden" data-tool="redact"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Redacting...</span></div>
                    <div class="result-section hidden" data-tool="redact">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE BG REMOVER ──────────── -->
            <div class="tool-panel" id="tool-image-bg-remove">
                <div class="tool-header">
                    <h2><i class="fas fa-user-alt"></i> Background Remover</h2>
                    <p>Remove the background from images and get a transparent PNG</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-bg-remove" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-bg-remove">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('image-bg-remove')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Method</label>
                        <div class="format-select-grid" data-tool="bg-remove-method">
                            <button class="fmt-btn active" data-fmt="auto" onclick="selectOutputFmt(this)">Auto (AI)</button>
                            <button class="fmt-btn" data-fmt="white" onclick="selectOutputFmt(this)">White BG</button>
                            <button class="fmt-btn" data-fmt="black" onclick="selectOutputFmt(this)">Black BG</button>
                        </div>
                        <span class="option-hint">Auto uses AI-powered removal. White/Black removes solid color backgrounds.</span>
                    </div>
                    <button class="process-btn" onclick="processFile('image-bg-remove')"><i class="fas fa-user-alt"></i> Remove Background</button>
                    <div class="processing-status hidden" data-tool="image-bg-remove"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Removing background...</span></div>
                    <div class="result-section hidden" data-tool="image-bg-remove">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── MARKDOWN PREVIEW ──────────── -->
            <div class="tool-panel" id="tool-markdown-preview">
                <div class="tool-header">
                    <h2><i class="fab fa-markdown"></i> Markdown Preview</h2>
                    <p>Write Markdown and see a live-rendered HTML preview</p>
                </div>
                <div class="tool-body">
                    <div class="markdown-split">
                        <div class="markdown-editor-pane">
                            <label class="option-label">Markdown Input</label>
                            <textarea id="markdownInput" class="text-area-input mono" rows="16" placeholder="# Hello World\n\nType your **Markdown** here..." oninput="renderMarkdownPreview()"></textarea>
                        </div>
                        <div class="markdown-preview-pane">
                            <label class="option-label">Preview</label>
                            <div class="markdown-rendered" id="markdownOutput"><p class="text-muted">Preview will appear here...</p></div>
                        </div>
                    </div>
                    <button class="process-btn" onclick="copyMarkdownHTML()"><i class="fas fa-copy"></i> Copy as HTML</button>
                </div>
            </div>

            <footer class="footer">
                <span>Powered by <strong>C++</strong>, <strong>WebAssembly</strong>, <strong>FFmpeg</strong>, <strong>yt-dlp</strong> &amp; <strong>Ghostscript</strong> &mdash; Built with <i class="fas fa-heart"></i> by <a href="https://github.com/Luma-exe" target="_blank" rel="noopener" style="color:var(--accent-light);text-decoration:none;font-weight:600">Luma</a></span>
                <br>
                <a href="https://ko-fi.com/lumaexe" target="_blank" rel="noopener" class="footer-kofi"><i class="fas fa-mug-hot"></i> Buy me a coffee</a>
            </footer>
        </main>
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    </div>

    <!-- Ko-fi floating button -->
    <a href="https://ko-fi.com/lumaexe" target="_blank" rel="noopener" class="kofi-float" title="Support on Ko-fi">
        <span class="kofi-icon"><i class="fas fa-mug-hot"></i></span>
        <span class="kofi-label">Support</span>
        <span class="kofi-shine"></span>
    </a>

    <!-- Drop overlay -->
    <div class="drop-overlay" id="dropOverlay">
        <div class="drop-overlay-icon"><i class="fas fa-cloud-upload-alt"></i></div>
        <div class="drop-overlay-text">Drop to Analyze</div>
        <div class="drop-overlay-hint">Release to choose a tool for your file</div>
    </div>

    <!-- Quick-action modal -->
    <div class="quick-action-backdrop" id="quickActionBackdrop" onclick="closeQuickAction(event)">
        <div class="quick-action-modal">
            <div class="quick-action-header">
                <div>
                    <h3><i class="fas fa-bolt"></i> <span id="qaTitle">Quick Action</span></h3>
                    <div class="quick-action-file-info" id="qaFileInfo"></div>
                </div>
                <button class="quick-action-close" onclick="closeQuickAction()"><i class="fas fa-times"></i></button>
            </div>
            <div class="quick-action-grid" id="qaGrid"></div>
            <div class="quick-action-batch-hint hidden" id="qaBatchHint">
                <i class="fas fa-layer-group"></i>
                <span id="qaBatchText">Multiple files detected. Choosing a tool will batch-process all files.</span>
            </div>
        </div>
    </div>

    <!-- Batch processing overlay -->
    <div class="batch-overlay hidden" id="batchOverlay">
        <div class="batch-overlay-panel">
            <div class="batch-overlay-header">
                <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                <div>
                    <h3 id="batchOvTitle">Batch Processing...</h3>
                    <p id="batchOvStatus">Starting...</p>
                </div>
            </div>
            <div class="batch-overlay-progress">
                <div class="progress-bar-container"><div class="progress-bar" id="batchOvBar"></div></div>
                <div class="batch-overall-label"><span id="batchOvCurrent">0</span> / <span id="batchOvTotal">0</span> files</div>
            </div>
            <div class="batch-file-list" id="batchOvFileList"></div>
            <button class="batch-download-all hidden" id="batchOvDownloadAll" onclick="batchDownloadAll()"><i class="fas fa-file-archive"></i> Download All (.zip)</button>
            <button class="batch-new-btn hidden" id="batchOvNewBtn" onclick="closeBatchOverlay()"><i class="fas fa-plus"></i> New Batch</button>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(() => {});
    }
    </script>
</body>
</html>
