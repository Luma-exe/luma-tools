<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luma Tools — All-in-One Browser Toolkit</title>

    <!-- SEO -->
    <meta name="description" content="40+ free tools for AI study notes, flashcards, media download, image editing, video processing, audio conversion, PDF tools and more. Most tools run entirely in your browser — no upload, no account needed.">
    <meta name="keywords" content="luma tools, image compress, video convert, PDF tools, AI study notes, flashcards, media downloader, browser tools, free online tools">
    <meta name="author" content="Luma">

    <!-- Discord / Open Graph embed -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tools.lumaplayground.com">
    <meta property="og:site_name" content="Luma Tools">
    <meta property="og:title" content="Luma Tools — All-in-One Browser Toolkit">
    <meta property="og:description" content="40+ free tools — AI study notes &amp; flashcards, media downloader, image editing, video &amp; audio conversion, PDF tools and more. Most processing happens right in your browser.">
    <meta property="og:image" content="https://tools.lumaplayground.com/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Luma Tools — 40+ free browser-based tools">
    <meta name="theme-color" content="#7c5cff">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" type="image/png" href="/favicon.png">

    <!-- Twitter / X card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Luma Tools — All-in-One Browser Toolkit">
    <meta name="twitter:description" content="40+ free tools — AI study notes &amp; flashcards, media downloader, image editing, video &amp; audio conversion, PDF tools and more. Most processing happens right in your browser.">
    <meta name="twitter:image" content="https://tools.lumaplayground.com/og-image.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/ffmpeg@0.12.10/dist/umd/ffmpeg.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@ffmpeg/util@0.12.1/dist/umd/util.min.js" crossorigin="anonymous"></script>
    <!-- Audio waveform visualization -->
    <script src="https://unpkg.com/wavesurfer.js@7.6.0/dist/wavesurfer.min.js"></script>
    <!-- KaTeX: math rendering for study notes preview -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" crossorigin="anonymous"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <!-- Animated background -->
    <div class="bg-animation">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
        <div class="grid-overlay"></div>
    </div>
    <canvas id="particles"></canvas>

    <div class="app-layout">
        <!-- ═══════════════ SIDEBAR ═══════════════ -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a class="logo" href="#" onclick="switchTool('landing'); return false;">
                    <div class="logo-icon"><i class="fas fa-bolt"></i></div>
                    <div class="logo-text"><h1>LUMA<span>TOOLS</span></h1></div>
                </a>
                <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
            </div>

            <!-- Search bar -->
            <div class="sidebar-search">
                <div class="search-input-wrap">
                    <i class="fas fa-search"></i>
                    <input type="text" id="sidebarSearch" placeholder="Search tools..." autocomplete="off" spellcheck="false" oninput="filterSidebarTools()">
                </div>
            </div>

            <nav class="sidebar-nav" id="sidebarNav">
                <!-- Favourites (populated by JS) -->
                <div class="nav-category nav-cat-favs" id="navCatFavs" style="display:none">
                    <div class="nav-category-title" onclick="toggleNavCat(this)">
                        FAVOURITES <i class="fas fa-chevron-down nav-cat-chevron"></i>
                    </div>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">AI &amp; STUDY</div>
                    <a class="nav-item" data-tool="ai-study-notes" data-location="server" onclick="switchTool('ai-study-notes')">
                        <i class="fas fa-brain"></i><span>Study Notes</span>
                    </a>
                    <a class="nav-item" data-tool="ai-flashcards" data-location="server" onclick="switchTool('ai-flashcards')">
                        <i class="fas fa-clone"></i><span>Flashcards</span>
                    </a>
                    <a class="nav-item" data-tool="ai-quiz" data-location="server" onclick="switchTool('ai-quiz')">
                        <i class="fas fa-question-circle"></i><span>Practice Quiz</span>
                    </a>
                    <a class="nav-item" data-tool="ai-paraphrase" data-location="server" onclick="switchTool('ai-paraphrase')">
                        <i class="fas fa-sync-alt"></i><span>Paraphraser</span>
                    </a>
                    <a class="nav-item" data-tool="citation-gen" data-location="server" onclick="switchTool('citation-gen')">
                        <i class="fas fa-quote-left"></i><span>Citation Gen</span>
                    </a>
                    <a class="nav-item" data-tool="mind-map" data-location="server" onclick="switchTool('mind-map')">
                        <i class="fas fa-project-diagram"></i><span>Mind Map</span>
                    </a>
                    <a class="nav-item" data-tool="youtube-summary" data-location="server" onclick="switchTool('youtube-summary')">
                        <i class="fab fa-youtube"></i><span>YouTube Summary</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">DOWNLOAD</div>
                    <a class="nav-item" data-tool="downloader" data-location="server" onclick="switchTool('downloader')">
                        <i class="fas fa-download"></i><span>Media Downloader</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">IMAGE</div>
                    <a class="nav-item" data-tool="image-compress" data-location="browser" onclick="switchTool('image-compress')">
                        <i class="fas fa-compress-alt"></i><span>Compress</span>
                    </a>
                    <a class="nav-item" data-tool="image-resize" data-location="browser" onclick="switchTool('image-resize')">
                        <i class="fas fa-expand-arrows-alt"></i><span>Resize</span>
                    </a>
                    <a class="nav-item" data-tool="image-convert" data-location="browser" onclick="switchTool('image-convert')">
                        <i class="fas fa-exchange-alt"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="metadata-strip" data-location="server" onclick="switchTool('metadata-strip')">
                        <i class="fas fa-eraser"></i><span>Metadata Strip</span>
                    </a>
                    <a class="nav-item" data-tool="favicon-generate" data-location="browser" onclick="switchTool('favicon-generate')">
                        <i class="fas fa-star"></i><span>Favicon Generator</span>
                    </a>
                    <a class="nav-item" data-tool="image-crop" data-location="browser" onclick="switchTool('image-crop')">
                        <i class="fas fa-crop-alt"></i><span>Crop</span>
                    </a>
                    <a class="nav-item" data-tool="image-bg-remove" data-location="server" onclick="switchTool('image-bg-remove')">
                        <i class="fas fa-user-alt"></i><span>Background Remover</span>
                    </a>
                    <a class="nav-item" data-tool="image-watermark" data-location="server" onclick="switchTool('image-watermark')">
                        <i class="fas fa-stamp"></i><span>Watermark</span>
                    </a>
                    <a class="nav-item" data-tool="redact" data-location="browser" onclick="switchTool('redact')">
                        <i class="fas fa-user-secret"></i><span>Privacy Redaction</span>
                    </a>
                    <a class="nav-item" data-tool="screenshot-annotate" data-location="browser" onclick="switchTool('screenshot-annotate')">
                        <i class="fas fa-pencil-alt"></i><span>Screenshot Annotator</span>
                    </a>
                    <a class="nav-item" data-tool="color-palette" data-location="browser" onclick="switchTool('color-palette')">
                        <i class="fas fa-eye-dropper"></i><span>Color Palette</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">VIDEO</div>
                    <a class="nav-item" data-tool="video-compress" data-location="server" onclick="switchTool('video-compress')">
                        <i class="fas fa-file-video"></i><span>Compress</span>
                    </a>
                    <a class="nav-item" data-tool="video-trim" data-location="server" onclick="switchTool('video-trim')">
                        <i class="fas fa-cut"></i><span>Trim / Cut</span>
                    </a>
                    <a class="nav-item" data-tool="video-convert" data-location="server" onclick="switchTool('video-convert')">
                        <i class="fas fa-film"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="video-extract-audio" data-location="server" onclick="switchTool('video-extract-audio')">
                        <i class="fas fa-volume-up"></i><span>Extract Audio</span>
                    </a>
                    <a class="nav-item" data-tool="video-to-gif" data-location="server" onclick="switchTool('video-to-gif')">
                        <i class="fas fa-magic"></i><span>To GIF</span>
                    </a>
                    <a class="nav-item" data-tool="gif-to-video" data-location="server" onclick="switchTool('gif-to-video')">
                        <i class="fas fa-photo-video"></i><span>GIF to Video</span>
                    </a>
                    <a class="nav-item" data-tool="video-remove-audio" data-location="server" onclick="switchTool('video-remove-audio')">
                        <i class="fas fa-volume-mute"></i><span>Remove Audio</span>
                    </a>
                    <a class="nav-item" data-tool="video-speed" data-location="server" onclick="switchTool('video-speed')">
                        <i class="fas fa-tachometer-alt"></i><span>Speed Change</span>
                    </a>
                    <a class="nav-item" data-tool="video-frame" data-location="server" onclick="switchTool('video-frame')">
                        <i class="fas fa-camera"></i><span>Frame Extract</span>
                    </a>
                    <a class="nav-item" data-tool="video-stabilize" data-location="server" onclick="switchTool('video-stabilize')">
                        <i class="fas fa-hand-paper"></i><span>Stabilize</span>
                    </a>
                    <a class="nav-item" data-tool="subtitle-extract" data-location="server" onclick="switchTool('subtitle-extract')">
                        <i class="fas fa-closed-captioning"></i><span>Subtitles</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">AUDIO</div>
                    <a class="nav-item" data-tool="audio-convert" data-location="browser" onclick="switchTool('audio-convert')">
                        <i class="fas fa-headphones"></i><span>Convert</span>
                    </a>
                    <a class="nav-item" data-tool="audio-normalize" data-location="server" onclick="switchTool('audio-normalize')">
                        <i class="fas fa-balance-scale-right"></i><span>Normalize</span>
                    </a>
                    <a class="nav-item" data-tool="audio-trim" data-location="server" onclick="switchTool('audio-trim')">
                        <i class="fas fa-cut"></i><span>Trim</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">DOCUMENT</div>
                    <a class="nav-item" data-tool="pdf-compress" data-location="server" onclick="switchTool('pdf-compress')">
                        <i class="fas fa-file-pdf"></i><span>PDF Compress</span>
                    </a>
                    <a class="nav-item" data-tool="pdf-merge" data-location="server" onclick="switchTool('pdf-merge')">
                        <i class="fas fa-object-group"></i><span>PDF Merge</span>
                    </a>
                    <a class="nav-item" data-tool="pdf-split" data-location="server" onclick="switchTool('pdf-split')">
                        <i class="fas fa-scissors"></i><span>PDF Split</span>
                    </a>
                    <a class="nav-item" data-tool="pdf-to-images" data-location="server" onclick="switchTool('pdf-to-images')">
                        <i class="fas fa-images"></i><span>PDF to Images</span>
                    </a>
                    <a class="nav-item" data-tool="images-to-pdf" data-location="server" onclick="switchTool('images-to-pdf')">
                        <i class="fas fa-file-image"></i><span>Images to PDF</span>
                    </a>
                    <a class="nav-item" data-tool="markdown-to-pdf" data-location="server" onclick="switchTool('markdown-to-pdf')">
                        <i class="fab fa-markdown"></i><span>Markdown to PDF</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">BUSINESS</div>
                    <a class="nav-item" data-tool="resume-builder" data-location="browser" onclick="switchTool('resume-builder')">
                        <i class="fas fa-file-alt"></i><span>Resume Builder</span>
                    </a>
                    <a class="nav-item" data-tool="invoice-gen" data-location="browser" onclick="switchTool('invoice-gen')">
                        <i class="fas fa-file-invoice-dollar"></i><span>Invoice Generator</span>
                    </a>
                </div>
                <div class="nav-category">
                    <div class="nav-category-title">UTILITY</div>
                    <a class="nav-item" data-tool="qr-generate" data-location="browser" onclick="switchTool('qr-generate')">
                        <i class="fas fa-qrcode"></i><span>QR Code</span>
                    </a>
                    <a class="nav-item" data-tool="hash-generate" data-location="server" onclick="switchTool('hash-generate')">
                        <i class="fas fa-fingerprint"></i><span>Hash Generator</span>
                    </a>
                    <a class="nav-item" data-tool="archive-extract" data-location="server" onclick="switchTool('archive-extract')">
                        <i class="fas fa-box-open"></i><span>Archive Extractor</span>
                    </a>
                    <a class="nav-item" data-tool="base64" data-location="browser" onclick="switchTool('base64')">
                        <i class="fas fa-code"></i><span>Base64</span>
                    </a>
                    <a class="nav-item" data-tool="json-format" data-location="browser" onclick="switchTool('json-format')">
                        <i class="fas fa-file-code"></i><span>JSON Formatter</span>
                    </a>
                    <a class="nav-item" data-tool="color-convert" data-location="browser" onclick="switchTool('color-convert')">
                        <i class="fas fa-palette"></i><span>Color Converter</span>
                    </a>
                    <a class="nav-item" data-tool="markdown-preview" data-location="browser" onclick="switchTool('markdown-preview')">
                        <i class="fab fa-markdown"></i><span>Markdown Preview</span>
                    </a>
                    <a class="nav-item" data-tool="diff-checker" data-location="browser" onclick="switchTool('diff-checker')">
                        <i class="fas fa-code-compare"></i><span>Difference Checker</span>
                    </a>
                    <a class="nav-item" data-tool="word-counter" data-location="browser" onclick="switchTool('word-counter')">
                        <i class="fas fa-align-left"></i><span>Word Counter</span>
                    </a>
                    <a class="nav-item" data-tool="csv-json" data-location="server" onclick="switchTool('csv-json')">
                        <i class="fas fa-table"></i><span>CSV ↔ JSON</span>
                    </a>
                    <a class="nav-item" data-tool="unix-date" data-location="browser" onclick="switchTool('unix-date')">
                        <i class="fas fa-clock"></i><span>Unix ↔ Date</span>
                    </a>
                    <a class="nav-item" data-tool="regex-tester" data-location="browser" onclick="switchTool('regex-tester')">
                        <i class="fas fa-asterisk"></i><span>Regex Tester</span>
                    </a>
                    <a class="nav-item" data-tool="code-beautify" data-location="browser" onclick="switchTool('code-beautify')">
                        <i class="fas fa-indent"></i><span>Code Beautify</span>
                    </a>
                    <a class="nav-item" data-tool="uuid-gen" data-location="browser" onclick="switchTool('uuid-gen')">
                        <i class="fas fa-id-badge"></i><span>UUID Generator</span>
                    </a>
                    <a class="nav-item" data-tool="url-encode" data-location="browser" onclick="switchTool('url-encode')">
                        <i class="fas fa-link"></i><span>URL Encode</span>
                    </a>
                </div>
            </nav>
            <div class="search-empty hidden" id="searchEmpty">
                <i class="fas fa-search-minus"></i>
                <p>No tools found</p>
            </div>

            <div class="sidebar-footer">
                <div class="sidebar-credit"><i class="fas fa-bolt"></i> Built by <a href="https://github.com/Luma-exe" target="_blank" rel="noopener">Luma</a></div>
                <button class="install-app-btn" id="installAppBtn" onclick="installPWA()">
                    <i class="fas fa-download"></i> Install App
                </button>
                <button class="history-open-btn" id="historyBtn" onclick="toggleHistoryDrawer(true)">
                    <i class="fas fa-history"></i> History
                </button>
                <div class="server-status" id="serverStatus">
                    <div class="status-ticker">
                        <div class="ticker-track" id="tickerTrack">
                            <span class="status-text">Checking...</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Mobile header -->
        <div class="mobile-header" id="mobileHeader">
            <button class="mobile-menu-btn" onclick="toggleSidebar()"><i class="fas fa-bars"></i></button>
            <a class="mobile-logo" href="#" onclick="switchTool('landing'); return false;"><i class="fas fa-bolt"></i> LUMA<span>TOOLS</span></a>
        </div>

        <!-- ═══════════════ HISTORY DRAWER ═══════════════ -->
        <div class="history-drawer" id="historyDrawer" aria-hidden="true">
            <div class="history-drawer-header">
                <span><i class="fas fa-history"></i> Result History</span>
                <button class="history-close-btn" onclick="toggleHistoryDrawer(false)"><i class="fas fa-times"></i></button>
            </div>
            <div class="history-list" id="historyList">
                <p class="history-empty">No results yet. Process a file to see history here.</p>
            </div>
        </div>

        <!-- ═══════════════ MAIN CONTENT ═══════════════ -->
        <main class="main-content">
            <!-- Server offline banner -->
            <div class="server-offline-banner hidden" id="serverOfflineBanner">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Server is currently offline &mdash; server-side tools are unavailable. Browser tools still work.</span>
                <button onclick="this.parentElement.classList.add('hidden')" aria-label="Dismiss"><i class="fas fa-times"></i></button>
            </div>

            <!-- ──────────── LANDING / WELCOME PAGE ──────────── -->
            <div class="tool-panel active" id="tool-landing">
                <div class="landing-page">
                    <div class="landing-hero">
                        <div class="landing-logo-icon"><i class="fas fa-bolt"></i></div>
                        <h1 class="landing-title">LUMA<span>TOOLS</span></h1>
                        <p class="landing-tagline">A free, open source toolkit for students, creators and developers.</p>
                    </div>

                    <div class="landing-about">
                        <p>LumaTools started as a media toolkit and has grown into a free, open source platform for everyone. Use AI to generate study notes from lecture slides, compress a video, convert a PDF, or format JSON &mdash; all in one place. <strong>Most tools run entirely in your browser</strong> and never upload your files anywhere. Tools that need server power are clearly labelled, and your files are deleted the moment you&rsquo;re done.</p>
                    </div>

                    <div class="landing-behind">
                        <h3>Behind the scenes</h3>
                        <div class="landing-behind-grid">
                            <div class="landing-behind-card in-browser">
                                <span class="landing-behind-badge"><i class="fas fa-lock"></i> In your browser</span>
                                <p>Tools marked <strong>In your browser</strong> in the sidebar run entirely on your device using WebAssembly. Your files are never uploaded anywhere.</p>
                            </div>
                            <div class="landing-behind-card on-server">
                                <span class="landing-behind-badge"><i class="fas fa-server"></i> On our server</span>
                                <p>Tools marked <strong>On our server</strong> use our backend (FFmpeg, Ghostscript, yt-dlp) because they need native processing power. Files are processed and immediately deleted — we don't keep them.</p>
                            </div>
                        </div>
                    </div>

                    <div class="landing-drop-cta">
                        <div class="landing-drop-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                        <h2>Drop any file to get started</h2>
                        <p>Drag an image, video, audio, or PDF anywhere on this website. LumaTools will detect the file type and suggest the right tools instantly.</p>
                    </div>

                    <div class="landing-features">
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-wand-magic-sparkles"></i></div>
                            <h3>Smart Drag &amp; Drop</h3>
                            <p>Drop a file anywhere and a quick-action panel appears with every tool that matches your file type. No searching required.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-layer-group"></i></div>
                            <h3>Batch Processing</h3>
                            <p>Drop multiple files at once. LumaTools processes them in a queue and bundles the results into a single .zip download.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-microchip"></i></div>
                            <h3>Transparent by design</h3>
                            <p>Open any tool and check the tag on the right  green means it runs entirely in your browser, purple means it uses our server. No surprises, no hidden uploads.</p>
                        </div>
                        <div class="landing-feature">
                            <div class="landing-feature-icon"><i class="fas fa-download"></i></div>
                            <h3>Install as an App</h3>
                            <p>LumaTools is a Progressive Web App. Install it to your desktop or phone for instant access and a native app experience.</p>
                        </div>
                    </div>

                    <div class="landing-tools-overview">
                        <h2>50+ Tools, Zero Ads</h2>
                        <div class="landing-tool-chips">
                            <span class="landing-chip" onclick="switchTool('ai-study-notes')"><i class="fas fa-brain"></i> AI Study Notes</span>
                            <span class="landing-chip" onclick="switchTool('ai-flashcards')"><i class="fas fa-clone"></i> Flashcards</span>
                            <span class="landing-chip" onclick="switchTool('ai-quiz')"><i class="fas fa-question-circle"></i> Practice Quiz</span>
                            <span class="landing-chip" onclick="switchTool('ai-paraphrase')"><i class="fas fa-sync-alt"></i> Paraphraser</span>
                            <span class="landing-chip" onclick="switchTool('mind-map')"><i class="fas fa-project-diagram"></i> Mind Map</span>
                            <span class="landing-chip" onclick="switchTool('youtube-summary')"><i class="fab fa-youtube"></i> YouTube Summary</span>
                            <span class="landing-chip" onclick="switchTool('citation-gen')"><i class="fas fa-quote-left"></i> Citation Gen</span>
                            <span class="landing-chip" onclick="switchTool('downloader')"><i class="fas fa-download"></i> Media Downloader</span>
                            <span class="landing-chip" onclick="switchTool('screenshot-annotate')"><i class="fas fa-pencil-alt"></i> Annotator</span>
                            <span class="landing-chip" onclick="switchTool('color-palette')"><i class="fas fa-eye-dropper"></i> Color Palette</span>
                            <span class="landing-chip" onclick="switchTool('image-compress')"><i class="fas fa-compress-alt"></i> Image Compress</span>
                            <span class="landing-chip" onclick="switchTool('image-resize')"><i class="fas fa-expand-arrows-alt"></i> Image Resize</span>
                            <span class="landing-chip" onclick="switchTool('image-convert')"><i class="fas fa-exchange-alt"></i> Image Convert</span>
                            <span class="landing-chip" onclick="switchTool('image-crop')"><i class="fas fa-crop-alt"></i> Image Crop</span>
                            <span class="landing-chip" onclick="switchTool('image-bg-remove')"><i class="fas fa-user-alt"></i> Background Remover</span>
                            <span class="landing-chip" onclick="switchTool('redact')"><i class="fas fa-user-secret"></i> Privacy Redaction</span>
                            <span class="landing-chip" onclick="switchTool('favicon-generate')"><i class="fas fa-star"></i> Favicon Generator</span>
                            <span class="landing-chip" onclick="switchTool('metadata-strip')"><i class="fas fa-eraser"></i> Metadata Strip</span>
                            <span class="landing-chip" onclick="switchTool('video-compress')"><i class="fas fa-file-video"></i> Video Compress</span>
                            <span class="landing-chip" onclick="switchTool('video-trim')"><i class="fas fa-cut"></i> Video Trim</span>
                            <span class="landing-chip" onclick="switchTool('video-convert')"><i class="fas fa-film"></i> Video Convert</span>
                            <span class="landing-chip" onclick="switchTool('video-to-gif')"><i class="fas fa-magic"></i> Video to GIF</span>
                            <span class="landing-chip" onclick="switchTool('gif-to-video')"><i class="fas fa-photo-video"></i> GIF to Video</span>
                            <span class="landing-chip" onclick="switchTool('video-extract-audio')"><i class="fas fa-volume-up"></i> Extract Audio</span>
                            <span class="landing-chip" onclick="switchTool('video-remove-audio')"><i class="fas fa-volume-mute"></i> Remove Audio</span>
                            <span class="landing-chip" onclick="switchTool('video-speed')"><i class="fas fa-tachometer-alt"></i> Speed Change</span>
                            <span class="landing-chip" onclick="switchTool('video-frame')"><i class="fas fa-camera"></i> Frame Extract</span>
                            <span class="landing-chip" onclick="switchTool('video-stabilize')"><i class="fas fa-hand-paper"></i> Stabilize</span>
                            <span class="landing-chip" onclick="switchTool('subtitle-extract')"><i class="fas fa-closed-captioning"></i> Subtitles</span>
                            <span class="landing-chip" onclick="switchTool('audio-convert')"><i class="fas fa-headphones"></i> Audio Convert</span>
                            <span class="landing-chip" onclick="switchTool('audio-normalize')"><i class="fas fa-balance-scale-right"></i> Audio Normalise</span>
                            <span class="landing-chip" onclick="switchTool('pdf-compress')"><i class="fas fa-file-pdf"></i> PDF Compress</span>
                            <span class="landing-chip" onclick="switchTool('pdf-merge')"><i class="fas fa-object-group"></i> PDF Merge</span>
                            <span class="landing-chip" onclick="switchTool('pdf-split')"><i class="fas fa-scissors"></i> PDF Split</span>
                            <span class="landing-chip" onclick="switchTool('pdf-to-images')"><i class="fas fa-images"></i> PDF to Images</span>
                            <span class="landing-chip" onclick="switchTool('images-to-pdf')"><i class="fas fa-file-image"></i> Images to PDF</span>
                            <span class="landing-chip" onclick="switchTool('markdown-to-pdf')"><i class="fab fa-markdown"></i> Markdown to PDF</span>
                            <span class="landing-chip" onclick="switchTool('resume-builder')"><i class="fas fa-file-alt"></i> Resume Builder</span>
                            <span class="landing-chip" onclick="switchTool('invoice-gen')"><i class="fas fa-file-invoice-dollar"></i> Invoice Generator</span>
                            <span class="landing-chip" onclick="switchTool('qr-generate')"><i class="fas fa-qrcode"></i> QR Code</span>
                            <span class="landing-chip" onclick="switchTool('hash-generate')"><i class="fas fa-fingerprint"></i> Hash Generator</span>
                            <span class="landing-chip" onclick="switchTool('archive-extract')"><i class="fas fa-box-open"></i> Archive Extractor</span>
                            <span class="landing-chip" onclick="switchTool('base64')"><i class="fas fa-code"></i> Base64</span>
                            <span class="landing-chip" onclick="switchTool('json-format')"><i class="fas fa-file-code"></i> JSON Formatter</span>
                            <span class="landing-chip" onclick="switchTool('color-convert')"><i class="fas fa-palette"></i> Color Converter</span>
                            <span class="landing-chip" onclick="switchTool('markdown-preview')"><i class="fab fa-markdown"></i> Markdown Preview</span>
                            <span class="landing-chip" onclick="switchTool('diff-checker')"><i class="fas fa-code-compare"></i> Difference Checker</span>
                            <span class="landing-chip" onclick="switchTool('word-counter')"><i class="fas fa-align-left"></i> Word Counter</span>
                            <span class="landing-chip" onclick="switchTool('csv-json')"><i class="fas fa-table"></i> CSV &harr; JSON</span>
                            <span class="landing-chip" onclick="switchTool('unix-date')"><i class="fas fa-clock"></i> Unix &harr; Date</span>
                            <span class="landing-chip" onclick="switchTool('regex-tester')"><i class="fas fa-asterisk"></i> Regex Tester</span>
                            <span class="landing-chip" onclick="switchTool('code-beautify')"><i class="fas fa-indent"></i> Code Beautify</span>
                            <span class="landing-chip" onclick="switchTool('uuid-gen')"><i class="fas fa-id-badge"></i> UUID Generator</span>
                            <span class="landing-chip" onclick="switchTool('url-encode')"><i class="fas fa-link"></i> URL Encoder</span>
                        </div>
                    </div>
                    <div class="landing-cta-row">
                        <button class="landing-cta-btn" onclick="switchTool('ai-study-notes')"><i class="fas fa-rocket"></i> Try AI Study Tools</button>
                        <button class="landing-install-btn" id="landingInstallBtn" onclick="installPWA()"><i class="fas fa-download"></i> Install App</button>
                    </div>

                    <div class="landing-privacy-notice">
                        <i class="fas fa-shield-halved"></i>
                        <div>
                            <strong>What we track &amp; why</strong>
                            <p>We collect the bare minimum needed to understand how the site is used: which tools are used, whether a request succeeded or failed, and an anonymous daily visitor count. Your IP address is never stored &mdash; it is immediately hashed (one-way, irreversible) and discarded. No personal data, no cookies, no third-party analytics, no ads. Files you process are deleted from our server as soon as your download is ready.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ──────────── MEDIA DOWNLOADER ──────────── -->
            <div class="tool-panel" id="tool-downloader">
                <div class="tool-header">
                    <h2><i class="fas fa-download"></i> Media Downloader</h2>
                    <p>Download videos and audio from any supported platform</p>
                </div>
                <div class="tool-body">
                    <!-- URL Input -->
                    <div class="input-section">
                        <div class="input-wrapper" id="inputWrapper">
                            <div class="platform-badge" id="platformBadge"><i class="fas fa-link"></i></div>
                            <input type="url" id="urlInput" placeholder="Paste any media URL here..." autocomplete="off" spellcheck="false">
                            <button class="analyze-btn" id="analyzeBtn" onclick="analyzeURL()"><i class="fas fa-search"></i><span>Analyze</span></button>
                        </div>
                        <div class="supported-platforms">
                            <span class="label">Supported:</span>
                            <div class="platform-icons">
                                <i class="fab fa-youtube" title="YouTube"></i>
                                <i class="fab fa-tiktok" title="TikTok"></i>
                                <i class="fab fa-instagram" title="Instagram"></i>
                                <i class="fab fa-spotify" title="Spotify"></i>
                                <i class="fab fa-soundcloud" title="SoundCloud"></i>
                                <i class="fab fa-x-twitter" title="X / Twitter"></i>
                                <i class="fab fa-facebook" title="Facebook"></i>
                                <i class="fab fa-twitch" title="Twitch"></i>
                                <i class="fab fa-reddit-alien" title="Reddit"></i>
                                <i class="fas fa-ellipsis" title="And more..."></i>
                            </div>
                        </div>
                    </div>

                    <!-- Loading -->
                    <div class="dl-section hidden" id="loadingSection">
                        <div class="loader"><div class="loader-ring"></div><div class="loader-ring"></div><div class="loader-ring"></div></div>
                        <p class="loading-text">Analyzing media...</p>
                    </div>

                    <!-- Error -->
                    <div class="dl-section hidden" id="errorSection">
                        <div class="error-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <p class="error-text" id="errorText">Something went wrong</p>
                        <button class="retry-btn" onclick="retryAnalysis()"><i class="fas fa-redo"></i> Try Again</button>
                    </div>

                    <!-- Playlist -->
                    <div class="dl-section hidden" id="playlistSection">
                        <div class="playlist-header">
                            <div class="playlist-info">
                                <div class="playlist-icon"><i class="fas fa-list-ul"></i></div>
                                <div><h2 id="playlistTitle">Playlist</h2><p class="playlist-meta"><span id="playlistCount">0 items</span><span class="dot-sep">&bull;</span><span id="playlistUploader">Unknown</span></p></div>
                            </div>
                            <div class="playlist-actions">
                                <button class="playlist-select-btn" onclick="toggleSelectAll()"><i class="fas fa-check-double" id="selectAllIcon"></i><span id="selectAllText">Select All</span></button>
                            </div>
                        </div>
                        <div class="playlist-items" id="playlistItems"></div>
                        <div class="playlist-resolving hidden" id="playlistResolving">
                            <div class="resolving-content"><i class="fas fa-circle-notch fa-spin"></i><span id="resolvingText">Loading track names...</span></div>
                            <button class="resolving-skip-btn hidden" id="resolvingSkipBtn" onclick="skipResolving()"><i class="fas fa-forward"></i> Skip</button>
                        </div>
                        <div class="playlist-footer">
                            <div class="playlist-selected-count"><span id="selectedCount">0</span> selected</div>
                            <div class="format-tabs playlist-format-tabs" id="playlistFormatTabs">
                                <button class="format-tab active" data-format="mp3" onclick="selectFormat('mp3')"><i class="fas fa-music"></i><span>MP3</span></button>
                                <button class="format-tab" data-format="mp4" onclick="selectFormat('mp4')"><i class="fas fa-video"></i><span>MP4</span></button>
                            </div>
                            <button class="download-btn" id="playlistDownloadBtn" onclick="startPlaylistDownload()"><div class="btn-content"><i class="fas fa-download"></i><span>Download Selected</span></div></button>
                        </div>
                    </div>

                    <!-- Batch Progress -->
                    <div class="dl-section hidden" id="batchProgressSection">
                        <div class="batch-header">
                            <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                            <div class="progress-info"><h3 id="batchTitle">Downloading playlist...</h3><p id="batchStatus">Starting...</p></div>
                        </div>
                        <div class="batch-overall">
                            <div class="progress-bar-container"><div class="progress-bar" id="batchOverallBar"></div></div>
                            <div class="batch-overall-label"><span id="batchCurrentNum">0</span> / <span id="batchTotalNum">0</span> files</div>
                        </div>
                        <div class="batch-current-item" id="batchCurrentItem">
                            <div class="batch-item-name" id="batchItemName"></div>
                            <div class="progress-bar-container small"><div class="progress-bar" id="batchItemBar"></div></div>
                            <div class="progress-details"><span class="progress-pct" id="batchItemPct"></span><span class="progress-speed" id="batchItemSpeed"></span><span class="progress-eta" id="batchItemEta"></span></div>
                        </div>
                    </div>

                    <!-- Batch Complete -->
                    <div class="dl-section hidden" id="batchCompleteSection">
                        <div class="complete-icon"><i class="fas fa-check-circle"></i></div>
                        <h3 id="batchCompleteText">All downloads complete!</h3>
                        <div class="batch-files" id="batchFiles"></div>
                        <button class="new-download-btn" onclick="resetDownloaderUI()"><i class="fas fa-plus"></i> New Download</button>
                    </div>

                    <!-- Media Info -->
                    <div class="dl-section hidden" id="mediaSection">
                        <div class="media-preview">
                            <div class="thumbnail-container">
                                <img id="mediaThumbnail" src="" alt="Thumbnail">
                                <div class="duration-badge" id="mediaDuration">0:00</div>
                                <div class="platform-overlay" id="platformOverlay"><i class="fab fa-youtube"></i></div>
                            </div>
                            <div class="media-info">
                                <h2 id="mediaTitle">Media Title</h2>
                                <p class="media-uploader" id="mediaUploader"><i class="fas fa-user"></i><span>Uploader</span></p>
                            </div>
                        </div>
                        <div class="format-section">
                            <h3><i class="fas fa-sliders-h"></i> Download Options</h3>
                            <div class="format-tabs" id="formatTabs">
                                <button class="format-tab active" data-format="mp3" onclick="selectFormat('mp3')"><i class="fas fa-music"></i><span>MP3</span><small>Audio Only</small></button>
                                <button class="format-tab" data-format="mp4" onclick="selectFormat('mp4')"><i class="fas fa-video"></i><span>MP4</span><small>Video</small></button>
                            </div>
                            <div class="quality-section hidden" id="qualitySection">
                                <h4><i class="fas fa-film"></i> Video Quality</h4>
                                <div class="quality-grid" id="qualityGrid"></div>
                            </div>
                            <button class="download-btn" id="downloadBtn" onclick="startDownload()"><div class="btn-content"><i class="fas fa-download"></i><span>Download</span></div><div class="btn-progress" id="btnProgress"></div></button>
                        </div>
                    </div>

                    <!-- Download Progress -->
                    <div class="dl-section hidden" id="progressSection">
                        <div class="progress-header">
                            <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                            <div class="progress-info"><h3 id="progressTitle">Downloading...</h3><p id="progressStatus">Starting download</p></div>
                        </div>
                        <div class="progress-bar-container"><div class="progress-bar" id="progressBar"></div></div>
                        <div class="progress-details"><span class="progress-pct" id="progressPct"></span><span class="progress-speed" id="progressSpeed"></span><span class="progress-eta" id="progressEta"></span><span class="progress-size" id="progressSize"></span></div>
                    </div>

                    <!-- Download Complete -->
                    <div class="dl-section hidden" id="completeSection">
                        <div class="complete-icon"><i class="fas fa-check-circle"></i></div>
                        <h3>Download Ready!</h3>
                        <a class="save-btn" id="saveBtn" href="#" download><i class="fas fa-save"></i><span>Save File</span></a>
                        <button class="new-download-btn" onclick="resetDownloaderUI()"><i class="fas fa-plus"></i> New Download</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-image-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-compress-alt"></i> Image Compress</h2>
                    <p>Reduce image file size while maintaining quality</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-compress" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-compress">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Quality</label>
                        <div class="slider-group"><input type="range" min="10" max="100" value="75" class="quality-slider" id="imageCompressQuality" oninput="document.getElementById('imageCompressQualityVal').textContent=this.value+'%'"><span class="slider-value" id="imageCompressQualityVal">75%</span></div>
                        <small class="option-hint">Lower = smaller file, less quality</small>
                    </div>
                    <button class="process-btn" onclick="processFile('image-compress')"><i class="fas fa-compress-alt"></i> Compress Image</button>
                    <div class="processing-status hidden" data-tool="image-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE RESIZE ──────────── -->
            <div class="tool-panel" id="tool-image-resize">
                <div class="tool-header">
                    <h2><i class="fas fa-expand-arrows-alt"></i> Image Resize</h2>
                    <p>Change image dimensions while preserving aspect ratio</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-resize" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-resize">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-resize')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Dimensions</label>
                        <div class="dimension-inputs">
                            <div class="dim-group"><label>Width</label><input type="number" id="resizeWidth" placeholder="Auto" min="1" max="10000"></div>
                            <div class="dim-lock active" id="dimLock" onclick="toggleAspectLock()"><i class="fas fa-link"></i></div>
                            <div class="dim-group"><label>Height</label><input type="number" id="resizeHeight" placeholder="Auto" min="1" max="10000"></div>
                        </div>
                        <small class="option-hint">Leave one blank to keep aspect ratio</small>
                    </div>
                    <button class="process-btn" onclick="processFile('image-resize')"><i class="fas fa-expand-arrows-alt"></i> Resize Image</button>
                    <div class="processing-status hidden" data-tool="image-resize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-resize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE CONVERT ──────────── -->
            <div class="tool-panel" id="tool-image-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-exchange-alt"></i> Image Convert</h2>
                    <p>Convert between PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, ICO and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-convert" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, ICO, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-convert">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="image-convert">
                            <button class="fmt-btn active" data-fmt="png" onclick="selectOutputFmt(this)">PNG</button>
                            <button class="fmt-btn" data-fmt="jpg" onclick="selectOutputFmt(this)">JPEG</button>
                            <button class="fmt-btn" data-fmt="webp" onclick="selectOutputFmt(this)">WebP</button>
                            <button class="fmt-btn" data-fmt="avif" onclick="selectOutputFmt(this)">AVIF</button>
                            <button class="fmt-btn" data-fmt="gif" onclick="selectOutputFmt(this)">GIF</button>
                            <button class="fmt-btn" data-fmt="bmp" onclick="selectOutputFmt(this)">BMP</button>
                            <button class="fmt-btn" data-fmt="tiff" onclick="selectOutputFmt(this)">TIFF</button>
                            <button class="fmt-btn" data-fmt="ico" onclick="selectOutputFmt(this)">ICO</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('image-convert')"><i class="fas fa-exchange-alt"></i> Convert Image</button>
                    <div class="processing-status hidden" data-tool="image-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE WATERMARK ──────────── -->
            <div class="tool-panel" id="tool-image-watermark">
                <div class="tool-header">
                    <h2><i class="fas fa-stamp"></i> Image Watermark</h2>
                    <p>Overlay text onto an image with customisable font, position, and opacity</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-watermark" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-watermark">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('image-watermark')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Watermark Text</label>
                        <input type="text" id="wmText" placeholder="© Your Name 2025" style="width:100%;padding:10px 12px;background:var(--input-bg,rgba(255,255,255,.06));border:1px solid var(--input-border,rgba(255,255,255,.1));border-radius:8px;color:var(--text,#e2e2ea);font-size:.95rem;outline:none">
                        <label class="option-label" style="margin-top:12px">Font Size</label>
                        <div class="slider-group"><input type="range" min="12" max="120" value="36" step="1" class="quality-slider" id="wmFontSize" oninput="document.getElementById('wmFontSizeVal').textContent=this.value+'px'"><span class="slider-value" id="wmFontSizeVal">36px</span></div>
                        <label class="option-label" style="margin-top:12px">Opacity</label>
                        <div class="slider-group"><input type="range" min="0.05" max="1" value="0.6" step="0.05" class="quality-slider" id="wmOpacity" oninput="document.getElementById('wmOpacityVal').textContent=Math.round(this.value*100)+'%'"><span class="slider-value" id="wmOpacityVal">60%</span></div>
                        <label class="option-label" style="margin-top:12px">Color</label>
                        <div class="preset-grid" data-tool="wm-color" style="grid-template-columns:repeat(4,1fr);gap:8px">
                            <button class="preset-btn active" data-val="white" onclick="selectPreset(this)"><span>White</span></button>
                            <button class="preset-btn" data-val="black" onclick="selectPreset(this)"><span>Black</span></button>
                            <button class="preset-btn" data-val="gray" onclick="selectPreset(this)"><span>Gray</span></button>
                            <button class="preset-btn" data-val="yellow" onclick="selectPreset(this)"><span>Yellow</span></button>
                        </div>
                        <label class="option-label" style="margin-top:12px">Position</label>
                        <div class="wm-position-grid" id="wmPositionGrid">
                            <button class="wm-pos-btn" data-pos="top-left"     onclick="selectWmPos(this)"><i class="fas fa-arrow-up-left"></i></button>
                            <button class="wm-pos-btn" data-pos="top-center"   onclick="selectWmPos(this)"><i class="fas fa-arrow-up"></i></button>
                            <button class="wm-pos-btn" data-pos="top-right"    onclick="selectWmPos(this)"><i class="fas fa-arrow-up-right"></i></button>
                            <button class="wm-pos-btn" data-pos="center-left"  onclick="selectWmPos(this)"><i class="fas fa-arrow-left"></i></button>
                            <button class="wm-pos-btn" data-pos="center"       onclick="selectWmPos(this)"><i class="fas fa-crosshairs"></i></button>
                            <button class="wm-pos-btn" data-pos="center-right" onclick="selectWmPos(this)"><i class="fas fa-arrow-right"></i></button>
                            <button class="wm-pos-btn" data-pos="bottom-left"  onclick="selectWmPos(this)"><i class="fas fa-arrow-down-left"></i></button>
                            <button class="wm-pos-btn" data-pos="bottom-center" onclick="selectWmPos(this)"><i class="fas fa-arrow-down"></i></button>
                            <button class="wm-pos-btn active" data-pos="bottom-right" onclick="selectWmPos(this)"><i class="fas fa-arrow-down-right"></i></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('image-watermark')"><i class="fas fa-stamp"></i> Apply Watermark</button>
                    <div class="processing-status hidden" data-tool="image-watermark"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="image-watermark">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-video-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-file-video"></i> Video Compress</h2>
                    <p>Reduce video file size with adjustable quality</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-compress" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-compress">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Compression Level</label>
                        <div class="preset-grid" data-tool="video-compress">
                            <button class="preset-btn" data-val="light" onclick="selectPreset(this)"><i class="fas fa-feather"></i><span>Light</span><small>~70% size</small></button>
                            <button class="preset-btn active" data-val="medium" onclick="selectPreset(this)"><i class="fas fa-balance-scale"></i><span>Medium</span><small>~50% size</small></button>
                            <button class="preset-btn" data-val="heavy" onclick="selectPreset(this)"><i class="fas fa-compress-arrows-alt"></i><span>Heavy</span><small>~30% size</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-compress')"><i class="fas fa-compress-alt"></i> Compress Video</button>
                    <div class="processing-status hidden" data-tool="video-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO TRIM ──────────── -->
            <div class="tool-panel" id="tool-video-trim">
                <div class="tool-header">
                    <h2><i class="fas fa-cut"></i> Video Trim / Cut</h2>
                    <p>Extract a segment from your video by setting start and end times</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-trim" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-trim">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-trim')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-video-trim" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformVideoTrim"></div>
                        <div class="waveform-timer"><span id="waveformTrimStart">00:00</span> &ndash; <span id="waveformTrimEnd">00:00</span></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Time Range</label>
                        <div class="time-inputs">
                            <div class="time-group"><label>Start</label><input type="text" id="trimStart" placeholder="00:00:00.000" value="00:00:00"></div>
                            <span class="time-arrow"><i class="fas fa-arrow-right"></i></span>
                            <div class="time-group"><label>End</label><input type="text" id="trimEnd" placeholder="00:01:00.000"></div>
                        </div>
                        <small class="option-hint">Format: HH:MM:SS or HH:MM:SS.mmm for frame precision</small>
                        <label class="option-label" style="margin-top:12px">Cut Mode</label>
                        <div class="preset-grid" data-tool="video-trim-mode">
                            <button class="preset-btn active" data-val="fast" onclick="selectPreset(this)"><i class="fas fa-bolt"></i><span>Fast</span><small>Keyframe aligned</small></button>
                            <button class="preset-btn" data-val="precise" onclick="selectPreset(this)"><i class="fas fa-crosshairs"></i><span>Precise</span><small>Frame-accurate</small></button>
                        </div>
                        <small class="option-hint">Precise re-encodes for exact frame cuts (slower, outputs MP4)</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-trim')"><i class="fas fa-cut"></i> Trim Video</button>
                    <div class="processing-status hidden" data-tool="video-trim"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-trim">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO CONVERT ──────────── -->
            <div class="tool-panel" id="tool-video-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-film"></i> Video Convert</h2>
                    <p>Convert between MP4, WebM, AVI, MOV, MKV and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-convert" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV, FLV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-convert">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="video-convert">
                            <button class="fmt-btn active" data-fmt="mp4" onclick="selectOutputFmt(this)">MP4</button>
                            <button class="fmt-btn" data-fmt="webm" onclick="selectOutputFmt(this)">WebM</button>
                            <button class="fmt-btn" data-fmt="avi" onclick="selectOutputFmt(this)">AVI</button>
                            <button class="fmt-btn" data-fmt="mov" onclick="selectOutputFmt(this)">MOV</button>
                            <button class="fmt-btn" data-fmt="mkv" onclick="selectOutputFmt(this)">MKV</button>
                            <button class="fmt-btn" data-fmt="gif" onclick="selectOutputFmt(this)">GIF</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-convert')"><i class="fas fa-film"></i> Convert Video</button>
                    <div class="processing-status hidden" data-tool="video-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO EXTRACT AUDIO ──────────── -->
            <div class="tool-panel" id="tool-video-extract-audio">
                <div class="tool-header">
                    <h2><i class="fas fa-volume-up"></i> Extract Audio</h2>
                    <p>Extract the audio track from any video file</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-extract-audio" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-extract-audio">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-extract-audio')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-video-extract-audio" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformVideoExtract"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Audio Format</label>
                        <div class="format-select-grid" data-tool="video-extract-audio">
                            <button class="fmt-btn active" data-fmt="mp3" onclick="selectOutputFmt(this)">MP3</button>
                            <button class="fmt-btn" data-fmt="wav" onclick="selectOutputFmt(this)">WAV</button>
                            <button class="fmt-btn" data-fmt="flac" onclick="selectOutputFmt(this)">FLAC</button>
                            <button class="fmt-btn" data-fmt="aac" onclick="selectOutputFmt(this)">AAC</button>
                            <button class="fmt-btn" data-fmt="ogg" onclick="selectOutputFmt(this)">OGG</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-extract-audio')"><i class="fas fa-volume-up"></i> Extract Audio</button>
                    <div class="processing-status hidden" data-tool="video-extract-audio"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="video-extract-audio">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── AUDIO CONVERT ──────────── -->
            <div class="tool-panel" id="tool-audio-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-headphones"></i> Audio Convert</h2>
                    <p>Convert between MP3, WAV, FLAC, OGG, AAC, M4A and more</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-audio-convert" data-accept="audio/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your audio file here</p><span>or click to browse</span><small>MP3, WAV, FLAC, OGG, AAC, M4A, WMA &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="audio/*,.mp3,.wav,.flac,.ogg,.aac,.m4a,.wma">
                    </div>
                    <div class="file-preview hidden" data-tool="audio-convert">
                        <div class="file-info"><i class="fas fa-music"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('audio-convert')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-audio-convert" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformAudioConvert"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="audio-convert">
                            <button class="fmt-btn active" data-fmt="mp3" onclick="selectOutputFmt(this)">MP3</button>
                            <button class="fmt-btn" data-fmt="wav" onclick="selectOutputFmt(this)">WAV</button>
                            <button class="fmt-btn" data-fmt="flac" onclick="selectOutputFmt(this)">FLAC</button>
                            <button class="fmt-btn" data-fmt="ogg" onclick="selectOutputFmt(this)">OGG</button>
                            <button class="fmt-btn" data-fmt="aac" onclick="selectOutputFmt(this)">AAC</button>
                            <button class="fmt-btn" data-fmt="m4a" onclick="selectOutputFmt(this)">M4A</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('audio-convert')"><i class="fas fa-headphones"></i> Convert Audio</button>
                    <div class="processing-status hidden" data-tool="audio-convert"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="audio-convert">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF COMPRESS ──────────── -->
            <div class="tool-panel" id="tool-pdf-compress">
                <div class="tool-header">
                    <h2><i class="fas fa-file-pdf"></i> PDF Compress</h2>
                    <p>Reduce PDF file size for easy sharing</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-pdf-compress" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your PDF here</p><span>or click to browse</span><small>PDF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf">
                    </div>
                    <div class="file-preview hidden" data-tool="pdf-compress">
                        <div class="file-info"><i class="fas fa-file-pdf"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('pdf-compress')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Compression Level</label>
                        <div class="preset-grid" data-tool="pdf-compress">
                            <button class="preset-btn" data-val="screen" onclick="selectPreset(this)"><i class="fas fa-mobile-alt"></i><span>Screen</span><small>Smallest</small></button>
                            <button class="preset-btn active" data-val="ebook" onclick="selectPreset(this)"><i class="fas fa-book"></i><span>eBook</span><small>Balanced</small></button>
                            <button class="preset-btn" data-val="printer" onclick="selectPreset(this)"><i class="fas fa-print"></i><span>Print</span><small>High quality</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('pdf-compress')"><i class="fas fa-compress-alt"></i> Compress PDF</button>
                    <div class="processing-status hidden" data-tool="pdf-compress"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="pdf-compress">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF MERGE ──────────── -->
            <div class="tool-panel" id="tool-pdf-merge">
                <div class="tool-header">
                    <h2><i class="fas fa-object-group"></i> PDF Merge</h2>
                    <p>Combine multiple PDF files into one document</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone multi" id="uz-pdf-merge" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop PDF files here</p><span>or click to browse (select multiple)</span><small>PDF files &mdash; Max 100 MB total</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf" multiple>
                    </div>
                    <div class="multi-file-list hidden" data-tool="pdf-merge"></div>
                    <button class="process-btn" onclick="processFile('pdf-merge')"><i class="fas fa-object-group"></i> Merge PDFs</button>
                    <div class="processing-status hidden" data-tool="pdf-merge"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Merging...</span></div>
                    <div class="result-section hidden" data-tool="pdf-merge">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF SPLIT ──────────── -->
            <div class="tool-panel" id="tool-pdf-split">
                <div class="tool-header">
                    <h2><i class="fas fa-scissors"></i> PDF Split</h2>
                    <p>Extract a range of pages from a PDF into a new file</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-pdf-split" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your PDF here</p><span>or click to browse</span><small>PDF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf">
                    </div>
                    <div class="file-preview hidden" data-tool="pdf-split">
                        <div class="file-info"><i class="fas fa-file-pdf"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('pdf-split')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Page Range</label>
                        <div class="time-inputs">
                            <div class="time-group"><label>From page</label><input type="number" id="pdfSplitFrom" placeholder="1" value="1" min="1" style="width:90px"></div>
                            <span class="time-arrow"><i class="fas fa-arrow-right"></i></span>
                            <div class="time-group"><label>To page</label><input type="number" id="pdfSplitTo" placeholder="end" min="1" style="width:90px"></div>
                        </div>
                        <small class="option-hint">Leave "To page" empty to extract from "From page" to the end</small>
                    </div>
                    <button class="process-btn" onclick="processFile('pdf-split')"><i class="fas fa-scissors"></i> Split PDF</button>
                    <div class="processing-status hidden" data-tool="pdf-split"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="pdf-split">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PDF TO IMAGES ──────────── -->
            <div class="tool-panel" id="tool-pdf-to-images">
                <div class="tool-header">
                    <h2><i class="fas fa-images"></i> PDF to Images</h2>
                    <p>Convert each page of a PDF into a separate image</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-pdf-to-images" data-accept=".pdf,application/pdf" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your PDF here</p><span>or click to browse</span><small>PDF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".pdf,application/pdf">
                    </div>
                    <div class="file-preview hidden" data-tool="pdf-to-images">
                        <div class="file-info"><i class="fas fa-file-pdf"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('pdf-to-images')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Image Format</label>
                        <div class="format-select-grid" data-tool="pdf-to-images">
                            <button class="fmt-btn active" data-fmt="png" onclick="selectOutputFmt(this)">PNG</button>
                            <button class="fmt-btn" data-fmt="jpg" onclick="selectOutputFmt(this)">JPEG</button>
                        </div>
                        <label class="option-label" style="margin-top:12px">DPI (Resolution)</label>
                        <div class="slider-group"><input type="range" min="72" max="600" value="200" step="1" class="quality-slider" id="pdfDpi" oninput="document.getElementById('pdfDpiVal').textContent=this.value+' DPI'"><span class="slider-value" id="pdfDpiVal">200 DPI</span></div>
                    </div>
                    <button class="process-btn" onclick="processFile('pdf-to-images')"><i class="fas fa-images"></i> Convert to Images</button>
                    <div class="processing-status hidden" data-tool="pdf-to-images"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="pdf-to-images">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download ZIP</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── METADATA STRIP ──────────── -->
            <div class="tool-panel" id="tool-metadata-strip">
                <div class="tool-header">
                    <h2><i class="fas fa-eraser"></i> Metadata Strip</h2>
                    <p>Remove EXIF data, GPS coordinates, camera info and other metadata from files</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-metadata-strip" data-accept="image/*,video/*,audio/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your file here</p><span>or click to browse</span><small>Images, Videos, Audio &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*,video/*,audio/*">
                    </div>
                    <div class="file-preview hidden" data-tool="metadata-strip">
                        <div class="file-info"><i class="fas fa-file"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('metadata-strip')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('metadata-strip')"><i class="fas fa-eraser"></i> Strip Metadata</button>
                    <div class="processing-status hidden" data-tool="metadata-strip"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="metadata-strip">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── FAVICON GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-favicon-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-star"></i> Favicon Generator</h2>
                    <p>Generate favicons in all standard sizes from a single image</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-favicon-generate" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP &mdash; Square image recommended &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="favicon-generate">
                        <div class="file-info"><i class="fas fa-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('favicon-generate')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('favicon-generate')"><i class="fas fa-star"></i> Generate Favicons</button>
                    <div class="processing-status hidden" data-tool="favicon-generate"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Generating...</span></div>
                    <div class="result-section hidden" data-tool="favicon-generate">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO TO GIF ──────────── -->
            <div class="tool-panel" id="tool-video-to-gif">
                <div class="tool-header">
                    <h2><i class="fas fa-magic"></i> Video to GIF</h2>
                    <p>Convert video clips into high-quality animated GIFs</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-to-gif" data-accept="video/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-to-gif">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-to-gif')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">FPS</label>
                        <div class="slider-group"><input type="range" min="5" max="30" value="15" class="quality-slider" id="gifFps" oninput="document.getElementById('gifFpsVal').textContent=this.value+' fps'"><span class="slider-value" id="gifFpsVal">15 fps</span></div>
                        <label class="option-label" style="margin-top:12px">Width (px)</label>
                        <div class="slider-group"><input type="range" min="120" max="1280" value="480" step="10" class="quality-slider" id="gifWidth" oninput="document.getElementById('gifWidthVal').textContent=this.value+'px'"><span class="slider-value" id="gifWidthVal">480px</span></div>
                        <small class="option-hint">Height auto-scales to keep aspect ratio</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-to-gif')"><i class="fas fa-magic"></i> Convert to GIF</button>
                    <div class="processing-status hidden" data-tool="video-to-gif"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-to-gif">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── GIF TO VIDEO ──────────── -->
            <div class="tool-panel" id="tool-gif-to-video">
                <div class="tool-header">
                    <h2><i class="fas fa-photo-video"></i> GIF to Video</h2>
                    <p>Convert animated GIFs into MP4 videos for smaller file sizes</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-gif-to-video" data-accept=".gif,image/gif" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your GIF here</p><span>or click to browse</span><small>GIF files &mdash; Max 100 MB</small></div>
                        <input type="file" class="upload-input" accept=".gif,image/gif">
                    </div>
                    <div class="file-preview hidden" data-tool="gif-to-video">
                        <div class="file-info"><i class="fas fa-file-image"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('gif-to-video')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('gif-to-video')"><i class="fas fa-photo-video"></i> Convert to MP4</button>
                    <div class="processing-status hidden" data-tool="gif-to-video"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="gif-to-video">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO REMOVE AUDIO ──────────── -->
            <div class="tool-panel" id="tool-video-remove-audio">
                <div class="tool-header">
                    <h2><i class="fas fa-volume-mute"></i> Remove Audio</h2>
                    <p>Strip the audio track from a video, keeping only the visuals</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-remove-audio" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-remove-audio">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-remove-audio')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('video-remove-audio')"><i class="fas fa-volume-mute"></i> Remove Audio</button>
                    <div class="processing-status hidden" data-tool="video-remove-audio"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-remove-audio">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO SPEED ──────────── -->
            <div class="tool-panel" id="tool-video-speed">
                <div class="tool-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Video Speed Change</h2>
                    <p>Speed up or slow down your video (0.25x to 4x)</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-speed" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-speed">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-speed')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Speed</label>
                        <div class="slider-group"><input type="range" min="0.25" max="4" value="2" step="0.25" class="quality-slider" id="videoSpeed" oninput="document.getElementById('videoSpeedVal').textContent=this.value+'x'"><span class="slider-value" id="videoSpeedVal">2x</span></div>
                        <div class="preset-grid" data-tool="video-speed-presets" style="margin-top:8px">
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=0.5;document.getElementById('videoSpeedVal').textContent='0.5x'"><span>0.5x</span><small>Slow</small></button>
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=1.5;document.getElementById('videoSpeedVal').textContent='1.5x'"><span>1.5x</span><small>Faster</small></button>
                            <button class="preset-btn active" onclick="document.getElementById('videoSpeed').value=2;document.getElementById('videoSpeedVal').textContent='2x'"><span>2x</span><small>Double</small></button>
                            <button class="preset-btn" onclick="document.getElementById('videoSpeed').value=4;document.getElementById('videoSpeedVal').textContent='4x'"><span>4x</span><small>Max</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('video-speed')"><i class="fas fa-tachometer-alt"></i> Change Speed</button>
                    <div class="processing-status hidden" data-tool="video-speed"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-speed">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO FRAME EXTRACT ──────────── -->
            <div class="tool-panel" id="tool-video-frame">
                <div class="tool-header">
                    <h2><i class="fas fa-camera"></i> Video Frame Extract</h2>
                    <p>Capture a single frame from any video at a specific timestamp</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-frame" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-frame">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-frame')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Timestamp</label>
                        <div class="time-inputs">
                            <div class="time-group" style="flex:1"><label>Time</label><input type="text" id="frameTimestamp" placeholder="00:00:05" value="00:00:00"></div>
                        </div>
                        <small class="option-hint">Format: HH:MM:SS or HH:MM:SS.mmm</small>
                    </div>
                    <button class="process-btn" onclick="processFile('video-frame')"><i class="fas fa-camera"></i> Extract Frame</button>
                    <div class="processing-status hidden" data-tool="video-frame"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="video-frame">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── VIDEO STABILIZE ──────────── -->
            <div class="tool-panel" id="tool-video-stabilize">
                <div class="tool-header">
                    <h2><i class="fas fa-hand-paper"></i> Video Stabilize</h2>
                    <p>Reduce camera shake and jitter from handheld footage</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-video-stabilize" data-accept="video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MP4, WebM, AVI, MOV, MKV &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="video-stabilize">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('video-stabilize')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('video-stabilize')"><i class="fas fa-hand-paper"></i> Stabilize Video</button>
                    <div class="processing-status hidden" data-tool="video-stabilize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="video-stabilize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── SUBTITLE EXTRACT ──────────── -->
            <div class="tool-panel" id="tool-subtitle-extract">
                <div class="tool-header">
                    <h2><i class="fas fa-closed-captioning"></i> Subtitle Extract</h2>
                    <p>Extract embedded subtitle tracks from video files</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-subtitle-extract" data-accept="video/*,.mkv,.mp4,.avi" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your video here</p><span>or click to browse</span><small>MKV, MP4, AVI (with embedded subs) &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="video/*,.mkv,.mp4,.avi">
                    </div>
                    <div class="file-preview hidden" data-tool="subtitle-extract">
                        <div class="file-info"><i class="fas fa-file-video"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('subtitle-extract')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output Format</label>
                        <div class="format-select-grid" data-tool="subtitle-extract">
                            <button class="fmt-btn active" data-fmt="srt" onclick="selectOutputFmt(this)">SRT</button>
                            <button class="fmt-btn" data-fmt="vtt" onclick="selectOutputFmt(this)">VTT</button>
                            <button class="fmt-btn" data-fmt="ass" onclick="selectOutputFmt(this)">ASS</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('subtitle-extract')"><i class="fas fa-closed-captioning"></i> Extract Subtitles</button>
                    <div class="processing-status hidden" data-tool="subtitle-extract"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="subtitle-extract">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── AUDIO NORMALIZE ──────────── -->
            <div class="tool-panel" id="tool-audio-normalize">
                <div class="tool-header">
                    <h2><i class="fas fa-balance-scale-right"></i> Audio Normalize</h2>
                    <p>Automatically adjust audio volume to a consistent level (EBU R128)</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-audio-normalize" data-accept="audio/*,video/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your audio file here</p><span>or click to browse</span><small>MP3, WAV, FLAC, AAC, M4A, MP4 &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="audio/*,video/*,.mp3,.wav,.flac,.ogg,.aac,.m4a">
                    </div>
                    <div class="file-preview hidden" data-tool="audio-normalize">
                        <div class="file-info"><i class="fas fa-music"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('audio-normalize')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('audio-normalize')"><i class="fas fa-balance-scale-right"></i> Normalize Audio</button>
                    <div class="processing-status hidden" data-tool="audio-normalize"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="audio-normalize">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── AUDIO TRIM ──────────── -->
            <div class="tool-panel" id="tool-audio-trim">
                <div class="tool-header">
                    <h2><i class="fas fa-cut"></i> Audio Trim</h2>
                    <p>Cut a segment from an audio file by setting start and end times</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-audio-trim" data-accept="audio/*" data-max="209715200">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your audio here</p><span>or click to browse</span><small>MP3, WAV, FLAC, AAC, M4A &mdash; Max 200 MB</small></div>
                        <input type="file" class="upload-input" accept="audio/*,.mp3,.wav,.flac,.ogg,.aac,.m4a">
                    </div>
                    <div class="file-preview hidden" data-tool="audio-trim">
                        <div class="file-info"><i class="fas fa-music"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('audio-trim')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="waveform-wrap" id="waveform-audio-trim" style="display:none;margin-bottom:12px">
                        <div class="waveform" id="waveformAudioTrim"></div>
                        <div class="waveform-timer"><span id="waveformAudioTrimStart">00:00</span> &ndash; <span id="waveformAudioTrimEnd">00:00</span></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Time Range</label>
                        <div class="time-inputs">
                            <div class="time-group"><label>Start</label><input type="text" id="audioTrimStart" placeholder="00:00:00.000" value="00:00:00"></div>
                            <span class="time-arrow"><i class="fas fa-arrow-right"></i></span>
                            <div class="time-group"><label>End</label><input type="text" id="audioTrimEnd" placeholder="00:01:00.000"></div>
                        </div>
                        <small class="option-hint">Format: HH:MM:SS or HH:MM:SS.mmm</small>
                        <label class="option-label" style="margin-top:12px">Cut Mode</label>
                        <div class="preset-grid" data-tool="audio-trim-mode">
                            <button class="preset-btn active" data-val="fast" onclick="selectPreset(this)"><i class="fas fa-bolt"></i><span>Fast</span><small>Keyframe aligned</small></button>
                            <button class="preset-btn" data-val="precise" onclick="selectPreset(this)"><i class="fas fa-crosshairs"></i><span>Precise</span><small>Re-encode to MP3</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('audio-trim')"><i class="fas fa-cut"></i> Trim Audio</button>
                    <div class="processing-status hidden" data-tool="audio-trim"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span class="processing-text">Processing...</span><div class="processing-progress"><div class="progress-bar-container small"><div class="progress-bar"></div></div><span class="progress-pct"></span></div></div>
                    <div class="result-section hidden" data-tool="audio-trim">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGES TO PDF ──────────── -->
            <div class="tool-panel" id="tool-images-to-pdf">
                <div class="tool-header">
                    <h2><i class="fas fa-file-image"></i> Images to PDF</h2>
                    <p>Combine multiple images into a single PDF document</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone multi" id="uz-images-to-pdf" data-accept="image/*" data-max="104857600">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop images here</p><span>or click to browse (select multiple)</span><small>PNG, JPEG, WebP, BMP &mdash; Max 100 MB total</small></div>
                        <input type="file" class="upload-input" accept="image/*" multiple>
                    </div>
                    <div class="multi-file-list hidden" data-tool="images-to-pdf"></div>
                    <button class="process-btn" onclick="processFile('images-to-pdf')"><i class="fas fa-file-image"></i> Create PDF</button>
                    <div class="processing-status hidden" data-tool="images-to-pdf"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="result-section hidden" data-tool="images-to-pdf">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── QR CODE GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-qr-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-qrcode"></i> QR Code Generator</h2>
                    <p>Generate QR codes from text, URLs, or any data</p>
                </div>
                <div class="tool-body">
                    <div class="text-tool-input">
                        <label class="option-label">Content</label>
                        <textarea id="qrInput" class="text-area-input" rows="3" placeholder="Enter text, URL, email, phone number..."></textarea>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Size</label>
                        <div class="slider-group"><input type="range" min="3" max="10" value="6" class="quality-slider" id="qrSize" oninput="document.getElementById('qrSizeVal').textContent=(['Tiny','','Small','','Medium','','Large',''][this.value-3]||'XL')"><span class="slider-value" id="qrSizeVal">Large</span></div>
                    </div>
                    <button class="process-btn" onclick="generateQR()"><i class="fas fa-qrcode"></i> Generate QR Code</button>
                    <div class="qr-output hidden" id="qrOutput">
                        <div class="qr-canvas-wrap" id="qrCanvasWrap"></div>
                        <button class="process-btn" style="margin-top:12px" onclick="downloadQR()"><i class="fas fa-download"></i> Download PNG</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── HASH GENERATOR ──────────── -->
            <div class="tool-panel" id="tool-hash-generate">
                <div class="tool-header">
                    <h2><i class="fas fa-fingerprint"></i> Hash Generator</h2>
                    <p>Calculate MD5, SHA1 and SHA256 checksums of any file</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-hash-generate" data-accept="*/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop any file here</p><span>or click to browse</span><small>Any file type &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input">
                    </div>
                    <div class="file-preview hidden" data-tool="hash-generate">
                        <div class="file-info"><i class="fas fa-file"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('hash-generate')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('hash-generate')"><i class="fas fa-fingerprint"></i> Generate Hashes</button>
                    <div class="processing-status hidden" data-tool="hash-generate"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Processing...</span></div>
                    <div class="hash-results hidden" id="hashResults"></div>
                </div>
            </div>

            <!-- ── ARCHIVE EXTRACTOR ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-archive-extract">
                <div class="tool-header">
                    <h2><i class="fas fa-box-open"></i> Archive Extractor</h2>
                    <p>Extract any archive format and download all contents as a ZIP.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-archive-extract"
                        data-accept=".zip,.7z,.rar,.tar,.gz,.bz2,.xz,.tgz,.tbz2,.txz,.cab,.iso,.lzh,.arj,.z,.lzma,.zst,.apk,.jar,.war,.ear,.whl,.egg,.nupkg,.crx,.xpi,.cbz,.cbr,.appx,.msix,.deb,.rpm,.dmg,.wim,.msi,.img,.pkg"
                        data-max="524288000">
                        <div class="upload-zone-content">
                            <i class="fas fa-box-open"></i>
                            <p>Drag &amp; drop your archive here</p>
                            <span>or click to browse</span>
                            <small>ZIP &bull; 7Z &bull; RAR &bull; TAR &bull; GZ &bull; BZ2 &bull; XZ &bull; ISO &bull; CAB &bull; LZH &bull; APK &bull; JAR &bull; DEB &bull; RPM &bull; DMG &bull; WIM &bull; CBZ &bull; CBR &bull; and more &mdash; Max 500 MB</small>
                        </div>
                        <input type="file" class="upload-input" accept=".zip,.7z,.rar,.tar,.gz,.bz2,.xz,.tgz,.tbz2,.txz,.cab,.iso,.lzh,.arj,.z,.lzma,.zst,.apk,.jar,.war,.ear,.whl,.egg,.nupkg,.crx,.xpi,.cbz,.cbr,.appx,.msix,.deb,.rpm,.dmg,.wim,.msi,.img,.pkg">
                    </div>
                    <div class="file-preview hidden" data-tool="archive-extract">
                        <div class="file-info"><i class="fas fa-file-archive"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('archive-extract')"><i class="fas fa-times"></i></button>
                    </div>
                    <button class="process-btn" onclick="processFile('archive-extract')"><i class="fas fa-box-open"></i> Extract Archive</button>
                    <div class="processing-status hidden" data-tool="archive-extract">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Extracting archive&hellip;</span>
                    </div>
                    <div class="result-section hidden" data-tool="archive-extract">
                        <div class="result-info"><i class="fas fa-check-circle"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download ZIP</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── BASE64 ──────────── -->
            <div class="tool-panel" id="tool-base64">
                <div class="tool-header">
                    <h2><i class="fas fa-code"></i> Base64 Encode / Decode</h2>
                    <p>Convert text or files to and from Base64 encoding</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options">
                        <label class="option-label">Mode</label>
                        <div class="format-select-grid" data-tool="base64-mode">
                            <button class="fmt-btn active" data-fmt="encode" onclick="selectOutputFmt(this)">Encode</button>
                            <button class="fmt-btn" data-fmt="decode" onclick="selectOutputFmt(this)">Decode</button>
                        </div>
                    </div>
                    <div class="text-tool-input">
                        <label class="option-label">Input</label>
                        <textarea id="base64Input" class="text-area-input" rows="5" placeholder="Paste text here..."></textarea>
                    </div>
                    <button class="process-btn" onclick="processBase64()"><i class="fas fa-code"></i> Convert</button>
                    <div class="text-tool-input">
                        <label class="option-label">Output</label>
                        <textarea id="base64Output" class="text-area-input" rows="5" readonly placeholder="Result will appear here..."></textarea>
                        <button class="copy-btn hidden" id="base64CopyBtn" onclick="copyToClipboard('base64Output')"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── JSON FORMATTER ──────────── -->
            <div class="tool-panel" id="tool-json-format">
                <div class="tool-header">
                    <h2><i class="fas fa-file-code"></i> JSON Formatter</h2>
                    <p>Format, validate, and beautify JSON data</p>
                </div>
                <div class="tool-body">
                    <div class="text-tool-input">
                        <label class="option-label">Input JSON</label>
                        <textarea id="jsonInput" class="text-area-input mono" rows="8" placeholder='{"key": "value", "nested": {"a":1}}'></textarea>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Indent</label>
                        <div class="format-select-grid" data-tool="json-indent">
                            <button class="fmt-btn" data-fmt="2" onclick="selectOutputFmt(this)">2 Spaces</button>
                            <button class="fmt-btn active" data-fmt="4" onclick="selectOutputFmt(this)">4 Spaces</button>
                            <button class="fmt-btn" data-fmt="tab" onclick="selectOutputFmt(this)">Tabs</button>
                            <button class="fmt-btn" data-fmt="0" onclick="selectOutputFmt(this)">Minify</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="formatJSON()"><i class="fas fa-check"></i> Format JSON</button>
                    <div class="text-tool-input" style="margin-top:16px">
                        <label class="option-label">Output</label>
                        <textarea id="jsonOutput" class="text-area-input mono" rows="10" readonly placeholder="Formatted JSON will appear here..."></textarea>
                        <button class="copy-btn hidden" id="jsonCopyBtn" onclick="copyToClipboard('jsonOutput')"><i class="fas fa-copy"></i> Copy</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── COLOR CONVERTER ──────────── -->
            <div class="tool-panel" id="tool-color-convert">
                <div class="tool-header">
                    <h2><i class="fas fa-palette"></i> Color Converter</h2>
                    <p>Convert between HEX, RGB, HSL, HSV and CMYK</p>
                </div>
                <div class="tool-body">
                    <div class="color-tabs">
                        <button class="color-tab active" onclick="switchColorTab('inputs')"><i class="fas fa-sliders-h"></i> Values</button>
                        <button class="color-tab" onclick="switchColorTab('picker')"><i class="fas fa-circle-half-stroke"></i> Color Picker</button>
                    </div>

                    <!-- ── VALUES TAB ── -->
                    <div class="color-tab-content active" id="colorTabInputs">
                        <div class="color-input-section">
                            <div class="color-preview-swatch" id="colorPreview" style="background:#6366f1"></div>
                            <div class="color-inputs-grid">
                                <div class="color-field"><label>HEX</label><input type="text" id="colorHex" value="#6366f1" oninput="updateColorFrom('hex')" placeholder="#rrggbb"></div>
                                <div class="color-field"><label>RGB</label><input type="text" id="colorRgb" value="99, 102, 241" oninput="updateColorFrom('rgb')" placeholder="r, g, b"></div>
                                <div class="color-field"><label>HSL</label><input type="text" id="colorHsl" value="239, 84%, 67%" oninput="updateColorFrom('hsl')" placeholder="h, s%, l%"></div>
                                <div class="color-field"><label>HSV</label><input type="text" id="colorHsv" value="239, 59%, 95%" oninput="updateColorFrom('hsv')" placeholder="h, s%, v%"></div>
                                <div class="color-field"><label>CMYK</label><input type="text" id="colorCmyk" value="59%, 58%, 0%, 5%" oninput="updateColorFrom('cmyk')" placeholder="c%, m%, y%, k%"></div>
                            </div>
                        </div>
                        <div class="color-copy-row">
                            <button class="color-copy-btn" onclick="copyColorValue('hex')"><i class="fas fa-copy"></i> HEX</button>
                            <button class="color-copy-btn" onclick="copyColorValue('rgb')"><i class="fas fa-copy"></i> RGB</button>
                            <button class="color-copy-btn" onclick="copyColorValue('hsl')"><i class="fas fa-copy"></i> HSL</button>
                            <button class="color-copy-btn" onclick="copyColorValue('hsv')"><i class="fas fa-copy"></i> HSV</button>
                            <button class="color-copy-btn" onclick="copyColorValue('cmyk')"><i class="fas fa-copy"></i> CMYK</button>
                        </div>
                    </div>

                    <!-- ── PICKER TAB ── -->
                    <div class="color-tab-content" id="colorTabPicker">
                        <!-- Wheel / Rectangle toggle -->
                        <div class="picker-type-toggle">
                            <button class="picker-type-btn active" id="pickerBtnWheel" onclick="setPickerType('wheel')"><i class="fas fa-circle-notch"></i> Wheel</button>
                            <button class="picker-type-btn" id="pickerBtnRect" onclick="setPickerType('rect')"><i class="fas fa-square"></i> Rectangle</button>
                        </div>

                        <!-- Wheel wrapper -->
                        <div class="color-wheel-section" id="pickerWheelSection">
                            <div class="color-wheel-wrap">
                                <canvas id="colorWheel" width="240" height="240"></canvas>
                                <div class="color-wheel-cursor" id="wheelCursor"></div>
                            </div>
                            <div class="color-brightness-wrap">
                                <label>Brightness</label>
                                <input type="range" id="wheelBrightness" min="0" max="100" value="100" oninput="updateWheelBrightness()">
                            </div>
                        </div>

                        <!-- Rectangle (SV square + hue strip) wrapper -->
                        <div class="color-rect-section hidden" id="pickerRectSection">
                            <div class="color-rect-wrap">
                                <canvas id="colorRectSV" width="240" height="200" class="color-rect-canvas"></canvas>
                                <div class="color-rect-cursor" id="rectCursor"></div>
                            </div>
                            <div class="color-hue-wrap">
                                <canvas id="colorHueStrip" width="240" height="18" class="color-hue-canvas"></canvas>
                                <div class="color-hue-cursor" id="hueCursor"></div>
                            </div>
                        </div>

                        <!-- Shared picker outputs -->
                        <div class="picker-outputs">
                            <div class="color-input-section">
                                <div class="color-preview-swatch" id="colorPreviewPicker" style="background:#6366f1"></div>
                                <div class="color-inputs-grid">
                                    <div class="color-field"><label>HEX</label><input type="text" id="colorHexPicker" value="#6366f1" readonly></div>
                                    <div class="color-field"><label>RGB</label><input type="text" id="colorRgbPicker" value="99, 102, 241" readonly></div>
                                    <div class="color-field"><label>HSL</label><input type="text" id="colorHslPicker" value="239, 84%, 67%" readonly></div>
                                    <div class="color-field"><label>HSV</label><input type="text" id="colorHsvPicker" value="239, 59%, 95%" readonly></div>
                                    <div class="color-field"><label>CMYK</label><input type="text" id="colorCmykPicker" value="59%, 58%, 0%, 5%" readonly></div>
                                </div>
                            </div>
                            <div class="color-copy-row">
                                <button class="color-copy-btn" onclick="copyColorValue('hex', true)"><i class="fas fa-copy"></i> HEX</button>
                                <button class="color-copy-btn" onclick="copyColorValue('rgb', true)"><i class="fas fa-copy"></i> RGB</button>
                                <button class="color-copy-btn" onclick="copyColorValue('hsl', true)"><i class="fas fa-copy"></i> HSL</button>
                                <button class="color-copy-btn" onclick="copyColorValue('hsv', true)"><i class="fas fa-copy"></i> HSV</button>
                                <button class="color-copy-btn" onclick="copyColorValue('cmyk', true)"><i class="fas fa-copy"></i> CMYK</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE CROP ──────────── -->
            <div class="tool-panel" id="tool-image-crop">
                <div class="tool-header">
                    <h2><i class="fas fa-crop-alt"></i> Image Crop</h2>
                    <p>Crop images to a specific region or aspect ratio</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-crop" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-crop">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('image-crop')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="crop-canvas-wrap hidden" id="cropCanvasWrap">
                        <canvas id="cropCanvas"></canvas>
                        <div class="crop-selection" id="cropSelection"></div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Aspect Ratio</label>
                        <div class="format-select-grid" data-tool="crop-ratio">
                            <button class="fmt-btn active" data-fmt="free" onclick="selectOutputFmt(this); setCropRatio('free')">Free</button>
                            <button class="fmt-btn" data-fmt="1:1" onclick="selectOutputFmt(this); setCropRatio('1:1')">1:1</button>
                            <button class="fmt-btn" data-fmt="16:9" onclick="selectOutputFmt(this); setCropRatio('16:9')">16:9</button>
                            <button class="fmt-btn" data-fmt="4:3" onclick="selectOutputFmt(this); setCropRatio('4:3')">4:3</button>
                            <button class="fmt-btn" data-fmt="9:16" onclick="selectOutputFmt(this); setCropRatio('9:16')">9:16</button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('image-crop')"><i class="fas fa-crop-alt"></i> Crop Image</button>
                    <div class="processing-status hidden" data-tool="image-crop"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Cropping...</span></div>
                    <div class="result-section hidden" data-tool="image-crop">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── PRIVACY REDACTION ──────────── -->
            <div class="tool-panel" id="tool-redact">
                <div class="tool-header">
                    <h2><i class="fas fa-user-secret"></i> Privacy Redaction</h2>
                    <p>Hide sensitive info in images or videos by drawing black boxes or blur regions.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-redact" data-accept="image/*,video/*" data-max="524288000">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image or video here</p><span>or click to browse</span><small>PNG, JPEG, WebP, MP4, MOV, AVI &mdash; Max 500 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*,video/*">
                    </div>
                    <div class="file-preview hidden" data-tool="redact">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('redact')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="redact-canvas-wrap hidden" id="redactCanvasWrap">
                        <canvas id="redactCanvas"></canvas>
                        <div class="redact-tools">
                            <button class="redact-tool-btn active" id="redactBoxBtn" title="Draw black box"><i class="fas fa-square"></i></button>
                            <button class="redact-tool-btn" id="redactBlurBtn" title="Blur region"><i class="fas fa-water"></i></button>
                            <button class="redact-tool-btn" id="redactUndoBtn" title="Undo"><i class="fas fa-undo"></i></button>
                            <button class="redact-tool-btn" id="redactClearBtn" title="Clear all"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>
                    <div class="tool-options">
                        <span class="option-hint">Draw over areas to redact. For videos, redactions apply to all frames.</span>
                    </div>
                    <button class="process-btn" onclick="processFile('redact')"><i class="fas fa-user-secret"></i> Apply Redaction</button>
                    <div class="processing-status hidden" data-tool="redact"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Redacting...</span></div>
                    <div class="result-section hidden" data-tool="redact">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── IMAGE BG REMOVER ──────────── -->
            <div class="tool-panel" id="tool-image-bg-remove">
                <div class="tool-header">
                    <h2><i class="fas fa-user-alt"></i> Background Remover</h2>
                    <p>Remove the background from images and get a transparent PNG</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-image-bg-remove" data-accept="image/*" data-max="52428800">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag & drop your image here</p><span>or click to browse</span><small>PNG, JPEG, WebP, BMP, TIFF, AVIF, GIF, HEIC, SVG &mdash; Max 50 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="file-preview hidden" data-tool="image-bg-remove">
                        <span class="file-name"></span><span class="file-size"></span>
                        <button class="file-remove" onclick="removeFile('image-bg-remove')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Method</label>
                        <div class="format-select-grid" data-tool="bg-remove-method">
                            <button class="fmt-btn active" data-fmt="auto" onclick="selectOutputFmt(this)">Auto (AI)</button>
                            <button class="fmt-btn" data-fmt="white" onclick="selectOutputFmt(this)">White BG</button>
                            <button class="fmt-btn" data-fmt="black" onclick="selectOutputFmt(this)">Black BG</button>
                        </div>
                        <span class="option-hint">Auto uses AI-powered removal. White/Black removes solid color backgrounds.</span>
                    </div>
                    <button class="process-btn" onclick="processFile('image-bg-remove')"><i class="fas fa-user-alt"></i> Remove Background</button>
                    <div class="processing-status hidden" data-tool="image-bg-remove"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Removing background...</span></div>
                    <div class="result-section hidden" data-tool="image-bg-remove">
                        <span class="result-name"></span><span class="result-size"></span>
                        <a class="result-download" href="#" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ──────────── DIFFERENCE CHECKER ──────────── -->
            <div class="tool-panel" id="tool-diff-checker">
                <div class="tool-header">
                    <h2><i class="fas fa-code-compare"></i> Difference Checker</h2>
                    <p>Compare two blocks of text or code with clean line-by-line highlighting</p>
                </div>
                <div class="tool-body">
                    <div class="diff-inputs">
                        <div class="diff-input-pane">
                            <div class="diff-pane-header">
                                <label class="option-label">Original</label>
                                <button class="diff-clear-btn" onclick="document.getElementById('diffOriginal').value='';runDiff()"><i class="fas fa-times"></i> Clear</button>
                            </div>
                            <textarea id="diffOriginal" class="text-area-input mono diff-textarea" rows="14" placeholder="Paste original text here..." oninput="runDiff()"></textarea>
                        </div>
                        <div class="diff-input-pane">
                            <div class="diff-pane-header">
                                <label class="option-label">Changed</label>
                                <button class="diff-clear-btn" onclick="document.getElementById('diffChanged').value='';runDiff()"><i class="fas fa-times"></i> Clear</button>
                            </div>
                            <textarea id="diffChanged" class="text-area-input mono diff-textarea" rows="14" placeholder="Paste changed text here..." oninput="runDiff()"></textarea>
                        </div>
                    </div>
                    <div class="diff-stats hidden" id="diffStats">
                        <span class="diff-stat added"><i class="fas fa-plus"></i> <span id="diffAddedCount">0</span> added</span>
                        <span class="diff-stat removed"><i class="fas fa-minus"></i> <span id="diffRemovedCount">0</span> removed</span>
                        <span class="diff-stat unchanged"><i class="fas fa-equals"></i> <span id="diffUnchangedCount">0</span> unchanged</span>
                    </div>
                    <div class="diff-output hidden" id="diffOutput">
                        <div class="diff-pane-header">
                            <label class="option-label">Diff Result</label>
                            <div class="diff-view-toggle">
                                <button class="diff-view-btn active" id="diffViewSplit" onclick="setDiffView('split')"><i class="fas fa-columns"></i> Split</button>
                                <button class="diff-view-btn" id="diffViewUnified" onclick="setDiffView('unified')"><i class="fas fa-list"></i> Unified</button>
                            </div>
                        </div>
                        <div class="diff-result" id="diffResult"></div>
                    </div>
                </div>
            </div>

            <!-- ──────────── WORD COUNTER ──────────── -->
            <div class="tool-panel" id="tool-word-counter">
                <div class="tool-header">
                    <h2><i class="fas fa-align-left"></i> Word Counter &amp; Reading Time</h2>
                    <p>Count words, characters, sentences and estimate reading time</p>
                </div>
                <div class="tool-body">
                    <div class="wc-stats" id="wcStats">
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcWords">0</span>
                            <span class="wc-stat-label">Words</span>
                        </div>
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcChars">0</span>
                            <span class="wc-stat-label">Characters</span>
                        </div>
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcCharsNoSpace">0</span>
                            <span class="wc-stat-label">Chars (no spaces)</span>
                        </div>
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcLines">0</span>
                            <span class="wc-stat-label">Lines</span>
                        </div>
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcSentences">0</span>
                            <span class="wc-stat-label">Sentences</span>
                        </div>
                        <div class="wc-stat-card wc-stat-reading">
                            <span class="wc-stat-value" id="wcReadTime">0 sec</span>
                            <span class="wc-stat-label">Reading time</span>
                        </div>
                        <div class="wc-stat-card wc-stat-reading">
                            <span class="wc-stat-value" id="wcSpeakTime">0 sec</span>
                            <span class="wc-stat-label">Speaking time</span>
                        </div>
                        <div class="wc-stat-card">
                            <span class="wc-stat-value" id="wcParagraphs">0</span>
                            <span class="wc-stat-label">Paragraphs</span>
                        </div>
                    </div>
                    <textarea id="wcInput" class="text-area-input wc-textarea" rows="14" placeholder="Paste or type your text here to get live statistics..." oninput="updateWordCount()"></textarea>
                    <div class="wc-actions">
                        <button class="copy-btn" onclick="navigator.clipboard.writeText(document.getElementById('wcInput').value).then(()=>showToast('Copied!','success'))"><i class="fas fa-copy"></i> Copy text</button>
                        <button class="copy-btn" onclick="document.getElementById('wcInput').value='';updateWordCount()"><i class="fas fa-trash-alt"></i> Clear</button>
                    </div>
                </div>
            </div>

            <!-- ──────────── MARKDOWN PREVIEW ──────────── -->
            <div class="tool-panel" id="tool-markdown-preview">
                <div class="tool-header">
                    <h2><i class="fab fa-markdown"></i> Markdown Preview</h2>
                    <p>Write Markdown and see a live-rendered HTML preview</p>
                </div>
                <div class="tool-body">
                    <div class="markdown-split">
                        <div class="markdown-editor-pane">
                            <label class="option-label">Markdown Input</label>
                            <textarea id="markdownInput" class="text-area-input mono" rows="12" placeholder="# Hello World\n\nType your **Markdown** here..." oninput="renderMarkdownPreview()"></textarea>
                        </div>
                        <div class="markdown-preview-pane">
                            <label class="option-label">Preview</label>
                            <div class="markdown-rendered" id="markdownOutput"><p class="text-muted">Preview will appear here...</p></div>
                        </div>
                    </div>
                    <button class="process-btn" onclick="copyMarkdownHTML()"><i class="fas fa-copy"></i> Copy as HTML</button>
                </div>
            </div>

            <!-- ── Markdown to PDF ─────────────────────────────────────── -->
            <div class="tool-panel" id="tool-markdown-to-pdf">
                <div class="tool-header">
                    <h2><i class="fab fa-markdown"></i> Markdown to PDF</h2>
                    <p>Convert Markdown files to PDF &mdash; supports Obsidian syntax including wikilinks, callouts, and frontmatter.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-markdown-to-pdf" data-accept=".md,.markdown,.txt,text/markdown,text/plain" data-max="10485760">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag &amp; drop your file here</p><span>or click to browse</span><small>.md, .markdown, .txt &mdash; Max 10 MB</small></div>
                        <input type="file" class="upload-input" accept=".md,.markdown,.txt">
                    </div>
                    <div class="file-preview hidden" data-tool="markdown-to-pdf">
                        <div class="file-info"><i class="fab fa-markdown"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('markdown-to-pdf')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Obsidian support</label>
                        <small class="option-hint"><i class="fas fa-check-circle" style="color:var(--accent)"></i> Wikilinks, callouts, tags &amp; frontmatter are auto-converted</small>
                    </div>
                    <button class="process-btn" onclick="processFile('markdown-to-pdf')"><i class="fab fa-markdown"></i> Convert to PDF</button>
                    <div class="processing-status hidden" data-tool="markdown-to-pdf"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Converting...</span></div>
                    <div class="result-section hidden" data-tool="markdown-to-pdf">
                        <div class="result-info"><i class="fas fa-file-pdf"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download PDF</a>
                    </div>
                </div>
            </div>

            <!-- ── CSV ↔ JSON ──────────────────────────────────────────── -->
            <div class="tool-panel" id="tool-csv-json">
                <div class="tool-header">
                    <h2><i class="fas fa-table"></i> CSV ↔ JSON Converter</h2>
                    <p>Convert between CSV and JSON formats. CSV files become JSON arrays; JSON arrays become CSV files.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-csv-json" data-accept=".csv,.json,text/csv,application/json,text/plain" data-max="10485760">
                        <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag &amp; drop your file here</p><span>or click to browse</span><small>.csv or .json &mdash; Max 10 MB</small></div>
                        <input type="file" class="upload-input" accept=".csv,.json">
                    </div>
                    <div class="file-preview hidden" data-tool="csv-json">
                        <div class="file-info"><i class="fas fa-table"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                        <button class="file-remove" onclick="removeFile('csv-json')"><i class="fas fa-times"></i></button>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Direction</label>
                        <div class="preset-grid" data-tool="csv-json-direction" style="grid-template-columns:repeat(2,1fr)">
                            <button class="preset-btn active" data-val="csv-to-json" onclick="selectPreset(this)"><i class="fas fa-arrow-right"></i><span>CSV → JSON</span></button>
                            <button class="preset-btn" data-val="json-to-csv" onclick="selectPreset(this)"><i class="fas fa-arrow-left"></i><span>JSON → CSV</span></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFile('csv-json')"><i class="fas fa-exchange-alt"></i> Convert</button>
                    <div class="processing-status hidden" data-tool="csv-json"><div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div><span>Converting...</span></div>
                    <div class="result-section hidden" data-tool="csv-json">
                        <div class="result-info"><i class="fas fa-file-alt"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download</a>
                    </div>
                </div>
            </div>

            <!-- ── AI Study Notes ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-ai-study-notes">
                <div class="tool-header">
                    <h2><i class="fas fa-brain"></i> AI Study Notes</h2>
                    <p>Upload lecture materials or paste your notes directly to generate AI-powered study notes with coverage analysis.</p>
                </div>
                <div class="tool-body">
                    <!-- Input mode toggle -->
                    <div class="tool-options" style="margin-bottom:12px">
                        <label class="option-label">Input method</label>
                        <div class="preset-grid" data-tool="study-notes-input-mode" style="grid-template-columns:repeat(3,1fr)">
                            <button class="preset-btn active" data-val="upload" onclick="selectPreset(this); toggleStudyNotesInput('upload')"><i class="fas fa-file-upload"></i><span>Upload File</span><small>PDF, Word, TXT</small></button>
                            <button class="preset-btn" data-val="paste" onclick="selectPreset(this); toggleStudyNotesInput('paste')"><i class="fas fa-paste"></i><span>Paste Text</span><small>Copy &amp; paste</small></button>
                            <button class="preset-btn" data-val="youtube" onclick="selectPreset(this); toggleStudyNotesInput('youtube')"><i class="fab fa-youtube"></i><span>YouTube URL</span><small>Video lecture</small></button>
                        </div>
                    </div>
                    <!-- Upload mode -->
                    <div id="study-notes-upload-mode">
                        <div class="upload-zone" id="uz-ai-study-notes" data-accept=".pdf,.doc,.docx,.txt,.rtf,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/rtf" data-max="20971520">
                            <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag &amp; drop your file here</p><span>or click to browse</span><small>PDF, Word (.doc, .docx), or Text files &mdash; Max 20 MB</small></div>
                            <input type="file" class="upload-input" accept=".pdf,.doc,.docx,.txt,.rtf,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,text/rtf">
                        </div>
                        <div class="file-preview hidden" data-tool="ai-study-notes">
                            <div class="file-info"><i class="fas fa-file-alt"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                            <button class="file-remove" onclick="removeFile('ai-study-notes')"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <!-- Paste mode -->
                    <div id="study-notes-paste-mode" class="hidden">
                        <div class="study-notes-paste-area">
                            <textarea id="study-notes-text-input" placeholder="Paste your lecture notes, slides content, or any study material here...&#10;&#10;The AI will analyze this text and generate comprehensive study notes." rows="10"></textarea>
                            <div class="paste-char-count"><span id="paste-char-count">0</span> characters</div>
                        </div>
                    </div>
                    <!-- YouTube URL mode -->
                    <div id="study-notes-youtube-mode" class="hidden">
                        <div class="input-group">
                            <label for="study-notes-youtube-url">YouTube Video URL</label>
                            <input type="url" id="study-notes-youtube-url" placeholder="https://www.youtube.com/watch?v=...">
                        </div>
                        <p class="input-hint"><i class="fas fa-info-circle"></i> The video transcript will be fetched and used to generate study notes.</p>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Output format</label>
                        <div class="preset-grid" data-tool="study-notes-format" style="grid-template-columns:repeat(2,1fr)">
                            <button class="preset-btn active" data-val="markdown" onclick="selectPreset(this); toggleStudyNotesMathOption('markdown')"><i class="fab fa-markdown"></i><span>Markdown</span><small>Obsidian ready</small></button>
                            <button class="preset-btn" data-val="plain" onclick="selectPreset(this); toggleStudyNotesMathOption('plain')"><i class="fas fa-align-left"></i><span>Plain Text</span><small>.txt file</small></button>
                        </div>
                    </div>
                    <div class="tool-options" id="study-notes-math-option">
                        <label class="option-label">Math notation <span style="font-weight:400;opacity:0.6;font-size:0.85em">(rendered in preview &amp; output)</span></label>
                        <div class="preset-grid" data-tool="study-notes-math" style="grid-template-columns:repeat(3,1fr)">
                            <button class="preset-btn active" data-val="dollar" onclick="selectPreset(this)"><i class="fas fa-dollar-sign"></i><span>Standard</span><small>$&hellip;$ / $$&hellip;$$</small></button>
                            <button class="preset-btn" data-val="latex" onclick="selectPreset(this)"><i class="fas fa-square-root-alt"></i><span>LaTeX</span><small>\(&hellip;\) / \[&hellip;\]</small></button>
                            <button class="preset-btn" data-val="none" onclick="selectPreset(this)"><i class="fas fa-ban"></i><span>None</span><small>Plain text only</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processStudyNotes()"><i class="fas fa-brain"></i> Generate Notes</button>
                    <div class="processing-status hidden" data-tool="ai-study-notes">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Generating notes...</span>
                    </div>
                    <div class="result-section hidden" data-tool="ai-study-notes">
                        <div class="result-info"><i class="fas fa-file-alt"></i><div><span class="result-name"></span><span class="result-size"></span></div></div>
                        <a class="result-download" download><i class="fas fa-download"></i> Download Notes</a>
                    </div>
                </div>
            </div>

            <!-- ── AI Flashcard Generator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-ai-flashcards">
                <div class="tool-header">
                    <h2><i class="fas fa-clone"></i> AI Flashcard Generator</h2>
                    <p>Upload notes or paste content to generate study flashcards with spaced repetition support.</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options" style="margin-bottom:12px">
                        <label class="option-label">Input method</label>
                        <div class="preset-grid" data-tool="flashcards-input-mode" style="grid-template-columns:repeat(2,1fr)">
                            <button class="preset-btn active" data-val="upload" onclick="selectPreset(this); toggleFlashcardsInput('upload')"><i class="fas fa-file-upload"></i><span>Upload File</span><small>PDF, Word, TXT</small></button>
                            <button class="preset-btn" data-val="paste" onclick="selectPreset(this); toggleFlashcardsInput('paste')"><i class="fas fa-paste"></i><span>Paste Text</span><small>Copy &amp; paste</small></button>
                        </div>
                    </div>
                    <div id="flashcards-upload-mode">
                        <div class="upload-zone" id="uz-ai-flashcards" data-accept=".pdf,.doc,.docx,.txt,.rtf,.md" data-max="20971520">
                            <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag &amp; drop your file here</p><span>or click to browse</span><small>PDF, Word, Text, or Markdown &mdash; Max 20 MB</small></div>
                            <input type="file" class="upload-input" accept=".pdf,.doc,.docx,.txt,.rtf,.md">
                        </div>
                        <div class="file-preview hidden" data-tool="ai-flashcards">
                            <div class="file-info"><i class="fas fa-file-alt"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                            <button class="file-remove" onclick="removeFile('ai-flashcards')"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <div id="flashcards-paste-mode" class="hidden">
                        <div class="study-notes-paste-area">
                            <textarea id="flashcards-text-input" placeholder="Paste your study notes, lecture content, or any material to convert into flashcards..." rows="8"></textarea>
                            <div class="paste-char-count"><span id="flashcards-char-count">0</span> characters</div>
                        </div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Number of cards</label>
                        <div class="preset-grid" data-tool="flashcards-count" style="grid-template-columns:repeat(5,1fr)">
                            <button class="preset-btn" data-val="10" onclick="selectPreset(this)"><span>10</span></button>
                            <button class="preset-btn active" data-val="20" onclick="selectPreset(this)"><span>20</span></button>
                            <button class="preset-btn" data-val="30" onclick="selectPreset(this)"><span>30</span></button>
                            <button class="preset-btn" data-val="50" onclick="selectPreset(this)"><span>50</span></button>
                            <button class="preset-btn" data-val="max" onclick="selectPreset(this)"><span>Max</span><small>All concepts</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processFlashcards()"><i class="fas fa-clone"></i> Generate Flashcards</button>
                    <div class="processing-status hidden" data-tool="ai-flashcards">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Generating flashcards...</span>
                    </div>
                    <div class="flashcards-result hidden" data-tool="ai-flashcards"></div>
                </div>
            </div>

            <!-- ── AI Practice Quiz ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-ai-quiz">
                <div class="tool-header">
                    <h2><i class="fas fa-question-circle"></i> AI Practice Quiz</h2>
                    <p>Generate multiple-choice questions from your study material to test your knowledge.</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options" style="margin-bottom:12px">
                        <label class="option-label">Input method</label>
                        <div class="preset-grid" data-tool="quiz-input-mode" style="grid-template-columns:repeat(2,1fr)">
                            <button class="preset-btn active" data-val="upload" onclick="selectPreset(this); toggleQuizInput('upload')"><i class="fas fa-file-upload"></i><span>Upload File</span><small>PDF, Word, TXT</small></button>
                            <button class="preset-btn" data-val="paste" onclick="selectPreset(this); toggleQuizInput('paste')"><i class="fas fa-paste"></i><span>Paste Text</span><small>Copy &amp; paste</small></button>
                        </div>
                    </div>
                    <div id="quiz-upload-mode">
                        <div class="upload-zone" id="uz-ai-quiz" data-accept=".pdf,.doc,.docx,.txt,.rtf,.md" data-max="20971520">
                            <div class="upload-zone-content"><i class="fas fa-cloud-upload-alt"></i><p>Drag &amp; drop your file here</p><span>or click to browse</span><small>PDF, Word, Text, or Markdown &mdash; Max 20 MB</small></div>
                            <input type="file" class="upload-input" accept=".pdf,.doc,.docx,.txt,.rtf,.md">
                        </div>
                        <div class="file-preview hidden" data-tool="ai-quiz">
                            <div class="file-info"><i class="fas fa-file-alt"></i><div><span class="file-name"></span><span class="file-size"></span></div></div>
                            <button class="file-remove" onclick="removeFile('ai-quiz')"><i class="fas fa-times"></i></button>
                        </div>
                    </div>
                    <div id="quiz-paste-mode" class="hidden">
                        <div class="study-notes-paste-area">
                            <textarea id="quiz-text-input" placeholder="Paste your study notes or lecture content to generate quiz questions..." rows="8"></textarea>
                            <div class="paste-char-count"><span id="quiz-char-count">0</span> characters</div>
                        </div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Number of questions</label>
                        <div class="preset-grid" data-tool="quiz-count" style="grid-template-columns:repeat(4,1fr)">
                            <button class="preset-btn" data-val="5" onclick="selectPreset(this)"><span>5</span></button>
                            <button class="preset-btn active" data-val="10" onclick="selectPreset(this)"><span>10</span></button>
                            <button class="preset-btn" data-val="15" onclick="selectPreset(this)"><span>15</span></button>
                            <button class="preset-btn" data-val="20" onclick="selectPreset(this)"><span>20</span></button>
                        </div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Difficulty</label>
                        <div class="preset-grid" data-tool="quiz-difficulty" style="grid-template-columns:repeat(3,1fr)">
                            <button class="preset-btn" data-val="easy" onclick="selectPreset(this)"><i class="fas fa-seedling"></i><span>Easy</span></button>
                            <button class="preset-btn active" data-val="medium" onclick="selectPreset(this)"><i class="fas fa-balance-scale"></i><span>Medium</span></button>
                            <button class="preset-btn" data-val="hard" onclick="selectPreset(this)"><i class="fas fa-fire"></i><span>Hard</span></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processQuiz()"><i class="fas fa-question-circle"></i> Generate Quiz</button>
                    <div class="processing-status hidden" data-tool="ai-quiz">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Generating quiz...</span>
                    </div>
                    <div class="quiz-result hidden" data-tool="ai-quiz"></div>
                </div>
            </div>


            <!-- ── AI Paraphraser ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-ai-paraphrase">
                <div class="tool-header">
                    <h2><i class="fas fa-sync-alt"></i> AI Paraphraser</h2>
                    <p>Rewrite text in different tones — formal, casual, simplified, or academic.</p>
                </div>
                <div class="tool-body">
                    <div class="study-notes-paste-area">
                        <textarea id="paraphrase-input" placeholder="Paste the text you want to paraphrase..." rows="6"></textarea>
                        <div class="paste-char-count"><span id="paraphrase-char-count">0</span> characters</div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Tone</label>
                        <div class="preset-grid" data-tool="paraphrase-tone" style="grid-template-columns:repeat(2,1fr)">
                            <button class="preset-btn active" data-val="formal" onclick="selectPreset(this)"><i class="fas fa-user-tie"></i><span>Formal</span><small>Professional</small></button>
                            <button class="preset-btn" data-val="casual" onclick="selectPreset(this)"><i class="fas fa-smile"></i><span>Casual</span><small>Friendly</small></button>
                            <button class="preset-btn" data-val="simplified" onclick="selectPreset(this)"><i class="fas fa-child"></i><span>Simplified</span><small>Easy to read</small></button>
                            <button class="preset-btn" data-val="academic" onclick="selectPreset(this)"><i class="fas fa-graduation-cap"></i><span>Academic</span><small>Scholarly</small></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processParaphrase()"><i class="fas fa-sync-alt"></i> Paraphrase</button>
                    <div class="processing-status hidden" data-tool="ai-paraphrase">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Paraphrasing...</span>
                    </div>
                    <div class="paraphrase-result hidden" data-tool="ai-paraphrase"></div>
                </div>
            </div>

            <!-- ── Citation Generator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-citation-gen">
                <div class="tool-header">
                    <h2><i class="fas fa-quote-left"></i> Citation Generator</h2>
                    <p>Generate properly formatted citations from URLs, DOIs, or book information.</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options" style="margin-bottom:12px">
                        <label class="option-label">Source type</label>
                        <div class="preset-grid" data-tool="citation-source" style="grid-template-columns:repeat(3,1fr)">
                            <button class="preset-btn active" data-val="url" onclick="selectPreset(this); toggleCitationInput('url')"><i class="fas fa-link"></i><span>URL</span></button>
                            <button class="preset-btn" data-val="doi" onclick="selectPreset(this); toggleCitationInput('doi')"><i class="fas fa-book-open"></i><span>DOI</span></button>
                            <button class="preset-btn" data-val="manual" onclick="selectPreset(this); toggleCitationInput('manual')"><i class="fas fa-edit"></i><span>Manual</span></button>
                        </div>
                    </div>
                    <div id="citation-url-mode">
                        <div class="input-group" style="margin-bottom:16px">
                            <label for="citation-url-input">Website URL</label>
                            <input type="url" id="citation-url-input" placeholder="https://example.com/article">
                        </div>
                    </div>
                    <div id="citation-doi-mode" class="hidden">
                        <div class="input-group" style="margin-bottom:16px">
                            <label for="citation-doi-input">DOI</label>
                            <input type="text" id="citation-doi-input" placeholder="10.1000/xyz123">
                        </div>
                    </div>
                    <div id="citation-manual-mode" class="hidden">
                        <div class="citation-manual-grid">
                            <div class="input-group"><label for="cit-author">Author(s)</label><input type="text" id="cit-author" placeholder="Last, First; Last, First"></div>
                            <div class="input-group"><label for="cit-title">Title</label><input type="text" id="cit-title" placeholder="Article or Book Title"></div>
                            <div class="input-group"><label for="cit-year">Year</label><input type="text" id="cit-year" placeholder="2024"></div>
                            <div class="input-group"><label for="cit-publisher">Publisher / Journal</label><input type="text" id="cit-publisher" placeholder="Publisher name"></div>
                            <div class="input-group"><label for="cit-url">URL (optional)</label><input type="url" id="cit-url" placeholder="https://..."></div>
                        </div>
                    </div>
                    <div class="tool-options">
                        <label class="option-label">Citation style</label>
                        <div class="preset-grid" data-tool="citation-style" style="grid-template-columns:repeat(4,1fr)">
                            <button class="preset-btn active" data-val="apa" onclick="selectPreset(this)"><span>APA</span></button>
                            <button class="preset-btn" data-val="mla" onclick="selectPreset(this)"><span>MLA</span></button>
                            <button class="preset-btn" data-val="chicago" onclick="selectPreset(this)"><span>Chicago</span></button>
                            <button class="preset-btn" data-val="harvard" onclick="selectPreset(this)"><span>Harvard</span></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="processCitation()"><i class="fas fa-quote-left"></i> Generate Citation</button>
                    <div class="processing-status hidden" data-tool="citation-gen">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Generating citation...</span>
                    </div>
                    <div class="citation-result hidden" data-tool="citation-gen"></div>
                </div>
            </div>

            <!-- ── Screenshot Annotator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-screenshot-annotate">
                <div class="tool-header">
                    <h2><i class="fas fa-pencil-alt"></i> Screenshot Annotator</h2>
                    <p>Add arrows, boxes, text, and blur to screenshots — great for tutorials and bug reports.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-screenshot-annotate" data-accept="image/*" data-max="20971520">
                        <div class="upload-zone-content"><i class="fas fa-image"></i><p>Drag &amp; drop an image here</p><span>or click to browse</span><small>PNG, JPG, WebP &mdash; Max 20 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="annotator-workspace hidden" data-tool="screenshot-annotate">
                        <div class="annotator-toolbar">
                            <button class="ann-tool active" data-tool="select" title="Select"><i class="fas fa-mouse-pointer"></i></button>
                            <button class="ann-tool" data-tool="arrow" title="Arrow"><i class="fas fa-long-arrow-alt-right"></i></button>
                            <button class="ann-tool" data-tool="rect" title="Rectangle"><i class="far fa-square"></i></button>
                            <button class="ann-tool" data-tool="circle" title="Circle"><i class="far fa-circle"></i></button>
                            <button class="ann-tool" data-tool="text" title="Text"><i class="fas fa-font"></i></button>
                            <button class="ann-tool" data-tool="blur" title="Blur"><i class="fas fa-eye-slash"></i></button>
                            <button class="ann-tool" data-tool="highlight" title="Highlight"><i class="fas fa-highlighter"></i></button>
                            <div class="ann-separator"></div>
                            <input type="color" id="ann-color" value="#ff3366" title="Color">
                            <input type="range" id="ann-stroke" min="2" max="10" value="4" title="Stroke width">
                            <div class="ann-separator"></div>
                            <button class="ann-action" data-action="undo" title="Undo"><i class="fas fa-undo"></i></button>
                            <button class="ann-action" data-action="clear" title="Clear all"><i class="fas fa-trash"></i></button>
                        </div>
                        <div class="annotator-canvas-wrap">
                            <canvas id="annotator-canvas"></canvas>
                        </div>
                        <div class="annotator-actions">
                            <button class="btn-secondary" onclick="resetAnnotator()"><i class="fas fa-times"></i> Cancel</button>
                            <button class="process-btn" onclick="downloadAnnotated()"><i class="fas fa-download"></i> Download</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ── Mind Map Generator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-mind-map">
                <div class="tool-header">
                    <h2><i class="fas fa-project-diagram"></i> Mind Map Generator</h2>
                    <p>Convert your notes into a visual concept map with AI-powered topic extraction.</p>
                </div>
                <div class="tool-body">
                    <div class="study-notes-paste-area">
                        <textarea id="mindmap-input" placeholder="Paste your notes, lecture content, or study material here...&#10;&#10;The AI will extract key concepts and create a visual mind map." rows="8"></textarea>
                        <div class="paste-char-count"><span id="mindmap-char-count">0</span> characters</div>
                    </div>
                    <button class="process-btn" onclick="processMindMap()"><i class="fas fa-project-diagram"></i> Generate Mind Map</button>
                    <div class="processing-status hidden" data-tool="mind-map">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Generating mind map...</span>
                    </div>
                    <div class="mindmap-result hidden" data-tool="mind-map"></div>
                </div>
            </div>

            <!-- ── YouTube Summary ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-youtube-summary">
                <div class="tool-header">
                    <h2><i class="fab fa-youtube"></i> YouTube Summary</h2>
                    <p>Paste a YouTube video URL to get an AI-generated summary of the video.</p>
                </div>
                <div class="tool-body">
                    <div class="input-group" style="margin-bottom:16px">
                        <label for="youtube-url-input">YouTube Video URL</label>
                        <input type="url" id="youtube-url-input" placeholder="https://www.youtube.com/watch?v=...">
                        <p class="input-hint"><i class="fas fa-info-circle"></i> The video transcript will be fetched and used to generate a summary.</p>
                    </div>
                    <button class="process-btn" onclick="processYouTubeSummary()"><i class="fas fa-magic"></i> Summarize Video</button>
                    <div class="processing-status hidden" data-tool="youtube-summary">
                        <div class="processing-spinner"><i class="fas fa-circle-notch fa-spin"></i></div>
                        <span>Fetching transcript and summarizing...</span>
                    </div>
                    <div class="youtube-result hidden" data-tool="youtube-summary"></div>
                </div>
            </div>

            <!-- ── Color Palette Extractor ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-color-palette">
                <div class="tool-header">
                    <h2><i class="fas fa-eye-dropper"></i> Color Palette Extractor</h2>
                    <p>Upload an image to extract its dominant colors with hex codes.</p>
                </div>
                <div class="tool-body">
                    <div class="upload-zone" id="uz-color-palette" data-accept="image/*" data-max="10485760">
                        <div class="upload-zone-content"><i class="fas fa-image"></i><p>Drag &amp; drop an image here</p><span>or click to browse</span><small>PNG, JPG, WebP &mdash; Max 10 MB</small></div>
                        <input type="file" class="upload-input" accept="image/*">
                    </div>
                    <div class="palette-result hidden" data-tool="color-palette"></div>
                </div>
            </div>

            <!-- ── Unix ↔ Date Converter ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-unix-date">
                <div class="tool-header">
                    <h2><i class="fas fa-clock"></i> Unix ↔ Date Converter</h2>
                    <p>Convert between Unix timestamps and human-readable dates.</p>
                </div>
                <div class="tool-body">
                    <div class="unix-converter">
                        <div class="input-group">
                            <label for="unix-timestamp">Unix Timestamp</label>
                            <div class="input-with-btn">
                                <input type="number" id="unix-timestamp" placeholder="1708387200">
                                <button class="btn-secondary" onclick="setCurrentTimestamp()"><i class="fas fa-clock"></i> Now</button>
                            </div>
                        </div>
                        <div class="converter-arrow"><i class="fas fa-exchange-alt"></i></div>
                        <div class="input-group">
                            <label for="human-date">Human Readable Date</label>
                            <input type="datetime-local" id="human-date" step="1">
                        </div>
                    </div>
                    <div class="unix-output hidden" id="unix-output"></div>
                </div>
            </div>

            <!-- ── Regex Tester ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-regex-tester">
                <div class="tool-header">
                    <h2><i class="fas fa-asterisk"></i> Regex Tester</h2>
                    <p>Test regular expressions with live highlighting and match info.</p>
                </div>
                <div class="tool-body">
                    <div class="input-group" style="margin-bottom:12px">
                        <label for="regex-pattern">Regular Expression</label>
                        <div class="regex-input-wrap">
                            <span class="regex-delim">/</span>
                            <input type="text" id="regex-pattern" placeholder="[A-Za-z]+">
                            <span class="regex-delim">/</span>
                            <input type="text" id="regex-flags" placeholder="gi" maxlength="6" class="regex-flags">
                        </div>
                    </div>
                    <div class="input-group">
                        <label for="regex-test-text">Test String</label>
                        <textarea id="regex-test-text" rows="6" placeholder="Enter text to test against the regex..."></textarea>
                    </div>
                    <div class="regex-result hidden" id="regex-result"></div>
                </div>
            </div>

            <!-- ── Code Beautifier ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-code-beautify">
                <div class="tool-header">
                    <h2><i class="fas fa-indent"></i> Code Beautifier</h2>
                    <p>Format and beautify JavaScript, JSON, CSS, HTML, and SQL code.</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options" style="margin-bottom:12px">
                        <label class="option-label">Language</label>
                        <div class="preset-grid" data-tool="code-lang" style="grid-template-columns:repeat(6,1fr)">
                            <button class="preset-btn active" data-val="javascript" onclick="selectPreset(this)"><span>JS</span></button>
                            <button class="preset-btn" data-val="typescript" onclick="selectPreset(this)"><span>TS</span></button>
                            <button class="preset-btn" data-val="json" onclick="selectPreset(this)"><span>JSON</span></button>
                            <button class="preset-btn" data-val="html" onclick="selectPreset(this)"><span>HTML</span></button>
                            <button class="preset-btn" data-val="css" onclick="selectPreset(this)"><span>CSS</span></button>
                            <button class="preset-btn" data-val="xml" onclick="selectPreset(this)"><span>XML</span></button>
                            <button class="preset-btn" data-val="sql" onclick="selectPreset(this)"><span>SQL</span></button>
                            <button class="preset-btn" data-val="python" onclick="selectPreset(this)"><span>Python</span></button>
                            <button class="preset-btn" data-val="java" onclick="selectPreset(this)"><span>Java</span></button>
                            <button class="preset-btn" data-val="csharp" onclick="selectPreset(this)"><span>C#</span></button>
                            <button class="preset-btn" data-val="cpp" onclick="selectPreset(this)"><span>C++</span></button>
                            <button class="preset-btn" data-val="php" onclick="selectPreset(this)"><span>PHP</span></button>
                            <button class="preset-btn" data-val="ruby" onclick="selectPreset(this)"><span>Ruby</span></button>
                            <button class="preset-btn" data-val="go" onclick="selectPreset(this)"><span>Go</span></button>
                            <button class="preset-btn" data-val="rust" onclick="selectPreset(this)"><span>Rust</span></button>
                            <button class="preset-btn" data-val="yaml" onclick="selectPreset(this)"><span>YAML</span></button>
                            <button class="preset-btn" data-val="markdown" onclick="selectPreset(this)"><span>MD</span></button>
                            <button class="preset-btn" data-val="graphql" onclick="selectPreset(this)"><span>GQL</span></button>
                        </div>
                    </div>
                    <div class="input-group" style="margin-bottom:12px">
                        <label for="code-input">Input Code</label>
                        <textarea id="code-input" rows="8" placeholder="Paste your code here..." class="code-textarea"></textarea>
                    </div>
                    <button class="process-btn" onclick="beautifyCode()"><i class="fas fa-magic"></i> Beautify</button>
                    <div class="code-output hidden" id="code-output">
                        <div class="code-output-header">
                            <span>Formatted Code</span>
                            <button class="btn-icon" onclick="copyCodeOutput()" title="Copy"><i class="fas fa-copy"></i></button>
                        </div>
                        <pre id="code-output-text"></pre>
                    </div>
                </div>
            </div>

            <!-- ── UUID Generator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-uuid-gen">
                <div class="tool-header">
                    <h2><i class="fas fa-id-badge"></i> UUID Generator</h2>
                    <p>Generate random UUIDs (v4) for your applications.</p>
                </div>
                <div class="tool-body">
                    <div class="tool-options" style="margin-bottom:16px">
                        <label class="option-label">Quantity</label>
                        <div class="preset-grid" data-tool="uuid-count" style="grid-template-columns:repeat(4,1fr)">
                            <button class="preset-btn active" data-val="1" onclick="selectPreset(this)"><span>1</span></button>
                            <button class="preset-btn" data-val="5" onclick="selectPreset(this)"><span>5</span></button>
                            <button class="preset-btn" data-val="10" onclick="selectPreset(this)"><span>10</span></button>
                            <button class="preset-btn" data-val="25" onclick="selectPreset(this)"><span>25</span></button>
                        </div>
                    </div>
                    <button class="process-btn" onclick="generateUUIDs()"><i class="fas fa-dice"></i> Generate</button>
                    <div class="uuid-output hidden" id="uuid-output">
                        <div class="uuid-output-header">
                            <span id="uuid-count-label">1 UUID generated</span>
                            <button class="btn-secondary" onclick="copyAllUUIDs()"><i class="fas fa-copy"></i> Copy All</button>
                        </div>
                        <div class="uuid-list" id="uuid-list"></div>
                    </div>
                </div>
            </div>

            <!-- ── URL Encoder/Decoder ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-url-encode">
                <div class="tool-header">
                    <h2><i class="fas fa-link"></i> URL Encoder / Decoder</h2>
                    <p>Encode or decode URL strings and query parameters.</p>
                </div>
                <div class="tool-body">
                    <div class="input-group" style="margin-bottom:12px">
                        <label for="url-input">Input Text</label>
                        <textarea id="url-input" rows="4" placeholder="Enter text or URL to encode/decode..."></textarea>
                    </div>
                    <div class="btn-row">
                        <button class="process-btn" onclick="encodeURL()" style="flex:1"><i class="fas fa-lock"></i> Encode</button>
                        <button class="btn-secondary" onclick="decodeURL()" style="flex:1"><i class="fas fa-unlock"></i> Decode</button>
                    </div>
                    <div class="url-output hidden" id="url-output">
                        <div class="url-output-header">
                            <span id="url-direction">Encoded</span>
                            <button class="btn-icon" onclick="copyURLOutput()" title="Copy"><i class="fas fa-copy"></i></button>
                        </div>
                        <textarea id="url-output-text" rows="4" readonly></textarea>
                    </div>
                </div>
            </div>

            <!-- ── Resume Builder ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-resume-builder">
                <div class="tool-header">
                    <h2><i class="fas fa-file-alt"></i> Resume Builder</h2>
                    <p>Create a professional resume with our easy-to-use builder. Export as PDF.</p>
                </div>
                <div class="tool-body">
                    <div class="resume-form">
                        <div class="resume-section">
                            <h3><i class="fas fa-user"></i> Personal Information</h3>
                            <div class="form-grid">
                                <div class="input-group"><label>Full Name</label><input type="text" id="resume-name" placeholder="John Doe"></div>
                                <div class="input-group"><label>Professional Title</label><input type="text" id="resume-title" placeholder="Software Engineer"></div>
                                <div class="input-group"><label>Email</label><input type="email" id="resume-email" placeholder="john@example.com"></div>
                                <div class="input-group"><label>Phone</label><input type="tel" id="resume-phone" placeholder="+1 234 567 890"></div>
                                <div class="input-group"><label>Location</label><input type="text" id="resume-location" placeholder="New York, NY"></div>
                                <div class="input-group"><label>LinkedIn / Website</label><input type="url" id="resume-linkedin" placeholder="linkedin.com/in/johndoe"></div>
                            </div>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-briefcase"></i> Professional Summary</h3>
                            <textarea id="resume-summary" rows="3" placeholder="A brief 2-3 sentence summary of your professional background and key strengths..."></textarea>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-building"></i> Work Experience</h3>
                            <div id="resume-experience-list"></div>
                            <button class="btn-secondary" onclick="addExperience()"><i class="fas fa-plus"></i> Add Experience</button>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-graduation-cap"></i> Education</h3>
                            <div id="resume-education-list"></div>
                            <button class="btn-secondary" onclick="addEducation()"><i class="fas fa-plus"></i> Add Education</button>
                        </div>
                        <div class="resume-section">
                            <h3><i class="fas fa-cogs"></i> Skills</h3>
                            <textarea id="resume-skills" rows="2" placeholder="JavaScript, React, Node.js, Python, SQL, AWS..."></textarea>
                        </div>
                    </div>
                    <button class="process-btn" onclick="generateResume()"><i class="fas fa-file-pdf"></i> Generate PDF Resume</button>
                </div>
            </div>

            <!-- ── Invoice Generator ──────────────────────────────────────── -->
            <div class="tool-panel" id="tool-invoice-gen">
                <div class="tool-header">
                    <h2><i class="fas fa-file-invoice-dollar"></i> Invoice Generator</h2>
                    <p>Create professional invoices for your business. Export as PDF.</p>
                </div>
                <div class="tool-body">
                    <div class="invoice-form">
                        <div class="invoice-row">
                            <div class="invoice-col">
                                <h3><i class="fas fa-user-tie"></i> From (Your Business)</h3>
                                <div class="input-group"><label>Business Name</label><input type="text" id="inv-from-name" placeholder="Your Company Ltd."></div>
                                <div class="input-group"><label>Address</label><textarea id="inv-from-address" rows="2" placeholder="123 Business St&#10;City, State 12345"></textarea></div>
                                <div class="input-group"><label>Email</label><input type="email" id="inv-from-email" placeholder="billing@company.com"></div>
                            </div>
                            <div class="invoice-col">
                                <h3><i class="fas fa-user"></i> Bill To (Client)</h3>
                                <div class="input-group"><label>Client Name</label><input type="text" id="inv-to-name" placeholder="Client Company"></div>
                                <div class="input-group"><label>Address</label><textarea id="inv-to-address" rows="2" placeholder="456 Client Ave&#10;City, State 67890"></textarea></div>
                                <div class="input-group"><label>Email</label><input type="email" id="inv-to-email" placeholder="client@example.com"></div>
                            </div>
                        </div>
                        <div class="invoice-details">
                            <div class="input-group"><label>Invoice Number</label><input type="text" id="inv-number" placeholder="INV-001"></div>
                            <div class="input-group"><label>Issue Date</label><input type="date" id="inv-date"></div>
                            <div class="input-group"><label>Due Date</label><input type="date" id="inv-due"></div>
                        </div>
                        <div class="invoice-items-section">
                            <h3><i class="fas fa-list"></i> Items</h3>
                            <div class="invoice-items-header">
                                <span>Description</span>
                                <span>Qty</span>
                                <span>Rate</span>
                                <span>Amount</span>
                                <span></span>
                            </div>
                            <div id="invoice-items-list"></div>
                            <button class="btn-secondary" onclick="addInvoiceItem()"><i class="fas fa-plus"></i> Add Item</button>
                        </div>
                        <div class="invoice-totals" id="invoice-totals">
                            <div class="invoice-total-row"><span>Subtotal:</span><span id="inv-subtotal">$0.00</span></div>
                            <div class="invoice-total-row"><span>Tax (%):</span><input type="number" id="inv-tax" value="0" min="0" max="100" onchange="calculateInvoiceTotal()"></div>
                            <div class="invoice-total-row total"><span>Total:</span><span id="inv-total">$0.00</span></div>
                        </div>
                        <div class="input-group">
                            <label>Notes</label>
                            <textarea id="inv-notes" rows="2" placeholder="Payment terms, bank details, or additional notes..."></textarea>
                        </div>
                    </div>
                    <button class="process-btn" onclick="generateInvoice()"><i class="fas fa-file-pdf"></i> Generate Invoice PDF</button>
                </div>
            </div>

            <footer class="footer">
                <span>Powered by <strong>C++</strong>, <strong>WebAssembly</strong>, <strong>FFmpeg</strong>, <strong>yt-dlp</strong> &amp; <strong>Ghostscript</strong> &mdash; Built with <i class="fas fa-heart"></i> by <a href="https://github.com/Luma-exe" target="_blank" rel="noopener" style="color:var(--accent-light);text-decoration:none;font-weight:600">Luma</a></span>
                <br>
                <a href="https://ko-fi.com/lumaexe" target="_blank" rel="noopener" class="footer-kofi"><i class="fas fa-mug-hot"></i> Buy me a coffee</a>
            </footer>
        </main>
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    </div>

    <!-- Ko-fi floating button -->
    <a href="https://ko-fi.com/lumaexe" target="_blank" rel="noopener" class="kofi-float" title="Support on Ko-fi">
        <span class="kofi-icon"><i class="fas fa-mug-hot"></i></span>
        <span class="kofi-label">Support</span>
        <span class="kofi-shine"></span>
    </a>

    <!-- Drop overlay -->
    <div class="drop-overlay" id="dropOverlay">
        <div class="drop-overlay-icon"><i class="fas fa-cloud-upload-alt"></i></div>
        <div class="drop-overlay-text">Drop to Analyze</div>
        <div class="drop-overlay-hint">Release to choose a tool for your file</div>
    </div>

    <!-- Quiz partial-submit confirm modal -->
    <div class="quiz-confirm-backdrop" id="quizConfirmBackdrop">
        <div class="quiz-confirm-modal">
            <div class="qcm-icon"><i class="fas fa-exclamation-triangle"></i></div>
            <h3>Submit with unanswered questions?</h3>
            <div class="qcm-body">You haven't answered all of the questions.</div>
            <div class="qcm-unanswered" id="qcmUnansweredList"></div>
            <div class="qcm-actions">
                <button class="qcm-cancel" onclick="closeQuizConfirmModal()"><i class="fas fa-arrow-left"></i> Go Back</button>
                <button class="qcm-submit" onclick="confirmSubmitQuiz()"><i class="fas fa-check-circle"></i> Submit Anyway</button>
            </div>
        </div>
    </div>

    <!-- Disabled-tool modal -->
    <div class="disabled-tool-backdrop" id="disabledToolBackdrop" onclick="closeDisabledModal(event)">
        <div class="disabled-tool-modal">
            <div class="dtm-icon"><i class="fas fa-ban"></i></div>
            <h3>Tool Unavailable</h3>
            <p>This tool has been disabled by the administrator and is not currently available. Please check back later.</p>
            <button class="dtm-close" onclick="closeDisabledModal()">Close</button>
        </div>
    </div>

    <!-- Quick-action modal -->
    <div class="quick-action-backdrop" id="quickActionBackdrop" onclick="closeQuickAction(event)">
        <div class="quick-action-modal">
            <div class="quick-action-header">
                <div>
                    <h3><i class="fas fa-bolt"></i> <span id="qaTitle">Quick Action</span></h3>
                    <div class="quick-action-file-info" id="qaFileInfo"></div>
                </div>
                <button class="quick-action-close" onclick="closeQuickAction()"><i class="fas fa-times"></i></button>
            </div>
            <div class="quick-action-grid" id="qaGrid"></div>
            <div class="quick-action-batch-hint hidden" id="qaBatchHint">
                <i class="fas fa-layer-group"></i>
                <span id="qaBatchText">Multiple files detected. Choosing a tool will batch-process all files.</span>
            </div>
        </div>
    </div>

    <!-- Batch processing overlay -->
    <div class="batch-overlay hidden" id="batchOverlay">
        <div class="batch-overlay-panel">
            <div class="batch-overlay-header">
                <div class="progress-icon spinning"><i class="fas fa-circle-notch"></i></div>
                <div>
                    <h3 id="batchOvTitle">Batch Processing...</h3>
                    <p id="batchOvStatus">Starting...</p>
                </div>
            </div>
            <div class="batch-overlay-progress">
                <div class="progress-bar-container"><div class="progress-bar" id="batchOvBar"></div></div>
                <div class="batch-overall-label"><span id="batchOvCurrent">0</span> / <span id="batchOvTotal">0</span> files</div>
            </div>
            <div class="batch-file-list" id="batchOvFileList"></div>
            <button class="batch-download-all hidden" id="batchOvDownloadAll" onclick="batchDownloadAll()"><i class="fas fa-file-archive"></i> Download All (.zip)</button>
            <button class="batch-new-btn hidden" id="batchOvNewBtn" onclick="closeBatchOverlay()"><i class="fas fa-plus"></i> New Batch</button>
        </div>
    </div>

    <!-- Core (must be first) -->
    <script src="js/state.js"></script>
    <script src="js/utils.js"></script>
    <!-- UI & navigation -->
    <script src="js/ui.js"></script>
    <!-- Tool modules -->
    <script src="js/waveform.js"></script>
    <script src="js/redact.js"></script>
    <script src="js/crop.js"></script>
    <script src="js/wasm.js"></script>
    <script src="js/file-tools.js"></script>
    <script src="js/batch.js"></script>
    <script src="js/tools-misc.js"></script>
    <script src="js/ai-tools.js"></script>
    <script src="js/utility-tools.js"></script>
    <!-- Downloader & health -->
    <script src="js/downloader.js"></script>
    <script src="js/health.js"></script>
    <!-- PWA, particles, init (must be last) -->
    <script src="js/pwa.js"></script>
    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/sw.js').catch(() => {});
    }
    </script>
    <!-- Click event tracking -->
    <script>
    (function() {
        function trackEvent(name) {
            var body = JSON.stringify({ name: name });
            // sendBeacon survives navigation (target="_blank" opens before fetch completes)
            if (navigator.sendBeacon) {
                var blob = new Blob([body], { type: 'application/json' });
                navigator.sendBeacon('/api/stats/event', blob);
            } else {
                fetch('/api/stats/event', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: body,
                    keepalive: true
                }).catch(() => {});
            }
        }
        document.addEventListener('click', function(e) {
            var el = e.target.closest('a');
            if (!el) return;
            var href = el.getAttribute('href') || '';
            if (href.includes('ko-fi.com')) {
                if (el.classList.contains('kofi-float')) {
                    trackEvent('kofi_float_click');
                } else {
                    trackEvent('kofi_footer_click');
                }
            } else if (href.includes('github.com/Luma-exe')) {
                trackEvent('github_click');
            }
        }, true);
    })();
    </script>
</body>
</html>
